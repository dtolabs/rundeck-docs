<!DOCTYPE html>
<html>
<head>
  <title>ACLPOLICY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Noah Campbell" />
  <meta name="author" content="Greg Schueler" />
  <meta name="date" content="December 20, 2013" />
<link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i" rel="stylesheet">
<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Latest compiled and minified JavaScript -->

<script type="text/javascript">
var jq = jQuery.noConflict();
jq(document).ready(function(){
  jq('.navbar-burger').click(function(){
    jq('.navbar-menu').toggle();
  });
})
jq(window).scroll(function() {
    if (jq(this).scrollTop() > 50 ) {
        jq('.scrolltop:hidden').stop(true, true).fadeIn();
    } else {
        jq('.scrolltop').stop(true, true).fadeOut();
    }
});
jq(function(){jq(".scrollitem").click(function(){jq("html,body").animate({scrollTop:jq("body").offset().top},"1000");return false})})
jq(window).scroll(function() {    
    var scroll = jq(window).scrollTop();
    if (scroll >= 250) {
      jq(".navbar").addClass("has-shadow");
    } else {
      jq(".navbar").removeClass("has-shadow");
    }
}); //missing );

window._pageRelpath="../";
jQuery(function(){
  jQuery('table').addClass('table table-condensed table-responsive'); 
  // jQuery('[data-toggle="popover"]').popover();
});
</script>

  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../styles.css" type="text/css" />
</head>
<body data-spy="scroll" data-target=".toc-nav" class="navbar-is-fixed-top">
<nav role="navigation" aria-label="main navigation" class="navbar is-fixed-top">
  <div class="container">
    <div class="navbar-brand"><a href="https://www.rundeck.com/open-source" class="navbar-item logo"><span
          data-v-ddc5174c=""><svg width="159" height="23" viewBox="0 0 159 23" xmlns="http://www.w3.org/2000/svg"
            class="logo-image" data-v-ddc5174c="">
            <g class="logo-type" fill="none" fill-rule="evenodd" data-v-ddc5174c="">
              <path
                d="M36.133 10.399v-6.26h1.073c2.78 0 4.17 1.01 4.17 3.028 0 2.155-1.43 3.232-4.285 3.232h-.959zm6.963.332c.813-1.005 1.219-2.206 1.219-3.603 0-1.788-.648-3.227-1.942-4.317-1.174-.98-3.081-1.47-5.722-1.47h-3.535v19.725h3.017v-8.074h.542l5.71 8.074h3.69l-6.189-8.407c1.33-.28 2.4-.923 3.21-1.928zM60.561 13.222c0 1.72-.28 2.96-.842 3.716-.836 1.134-2.02 1.7-3.547 1.7-1.52 0-2.697-.566-3.534-1.7-.56-.783-.84-2.021-.84-3.716V1.341H48.78V14.04c0 2.077.656 3.789 1.968 5.135 1.467 1.499 3.276 2.247 5.424 2.247 2.15 0 3.961-.748 5.438-2.247 1.312-1.346 1.967-3.058 1.967-5.135V1.341h-3.016v11.881zM82.944 15.048L68.367 0v21.065h3.016V7.256l14.577 15.01V1.341h-3.016zM100.938 16.428a6.872 6.872 0 0 1-2.434 1.418c-.897.282-2.024.422-3.379.422h-1.359V4.138h1.36c2.571 0 4.518.602 5.838 1.802 1.468 1.346 2.201 3.1 2.201 5.264 0 2.146-.742 3.887-2.227 5.224m2.175-12.544c-1.019-.92-2.153-1.571-3.404-1.955-1.166-.392-2.753-.588-4.764-.588H90.75v19.724h4.142c2.028 0 3.595-.183 4.7-.55 1.182-.365 2.312-1.017 3.391-1.954 2.15-1.873 3.224-4.325 3.224-7.357 0-3.024-1.03-5.463-3.094-7.32M110.001 21.065h11.03v-2.797h-8.014v-6.592h7.78V8.878h-7.78V4.14h8.014V1.341h-11.03zM126.52 4.574c-1.684 1.966-2.526 4.206-2.526 6.72 0 2.8 1.006 5.194 3.017 7.177 2.02 1.968 4.458 2.951 7.314 2.951 1.9 0 3.711-.48 5.437-1.442v-3.59c-.49.409-.96.758-1.404 1.047-.445.29-.873.52-1.288.69-.743.34-1.644.512-2.706.512-2.054 0-3.789-.712-5.205-2.133-1.415-1.424-2.122-3.17-2.122-5.24 0-2.094.707-3.864 2.122-5.313 1.407-1.457 3.138-2.184 5.192-2.184 1.865 0 3.668.72 5.411 2.159V2.402c-1.674-.963-3.408-1.444-5.204-1.444-3.288 0-5.967 1.205-8.039 3.615M149.912 10.27l9.037-8.928h-4.027l-7.78 7.869V1.34h-3.016v19.724h3.016v-8.163l.62-.613 7.199 8.776H159z"
                fill="#000" data-v-ddc5174c=""></path>
              <g class="logo-arrow" fill="#F7403A" data-v-ddc5174c="">
                <path
                  d="M0 21.065h13.404l2.501-3.945H2.501zM15.905 5.286L13.404 1.34H0l2.501 3.945zM18.406 9.23H5.002l1.25 1.973-1.25 1.973h13.404l1.25-1.973z"
                  data-v-ddc5174c=""></path>
              </g>
            </g>
          </svg></span></a> <a role="button" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample"
        class="navbar-burger burger"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span
          aria-hidden="true"></span></a></div>
    <div class="navbar-menu">
      <div class="navbar-start">
      </div>
      <div class="navbar-end">
        <div class="navbar-item">
        <form role="search"  action="/search/">
          <div class="field has-addons">
            <div class="control">
              <input class="input" type="text" placeholder="Keyword">
            </div>
            <div class="control">
              <button type="submit" class="button red-button">
                Search
              </button>
            </div>
          </div>
        </form>
        </div>
      </div>
    </div>
  </div>
</nav>
<div class="container">
    <nav class="breadcrumb" aria-label="breadcrumbs">
        <div class="columns">
            <div class="column is-two-thirds">
            <ul>
                
                    
                        <li><a href="../index.html">Rundeck Documentation (3.1.x)</a></li>
                    
                
                <li ><a href="index.html">Document Format Reference</a></li>
                <li class="active"><a href="aclpolicy.html">ACLPOLICY</a></li>
            </ul>
            </div>
            <div class="column">
            <ul>
                
                <li class="next"><a href="job-xml.html">JOB-XML <i class="fas fa-arrow-right"></i></a></li>
            </ul>
            </div>
        </div>
    </nav>
    <div class="breadcrumb-footer">
        <a class="btn btn-link top" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+manpages/man5/aclpolicy-v10.md&template=documentation-bug.md"> <i class="fas fa-flag"></i> Report a problem </a>
        <a class="btn btn-link top btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/manpages/man5/aclpolicy-v10.md"><i class="fas fa-pencil-alt"></i> Edit this page</a>
    </div>
</div>
<div id="docbody">
<div class="container">
<div class="columns">
<div class="column is-one-quarter toc-nav">
<section class="section sticky-toc">
<div class="nav">
<ul>
<li><a href="#overview">Overview</a><ul>
<li><a href="#authorizing-a-certain-action-on-a-resource">Authorizing a certain action on a resource</a></li>
<li><a href="#changes">Changes</a><ul>
<li><a href="#in-version-1.5">In version 1.5</a></li>
<li><a href="#in-version-3.1">In version 3.1</a></li>
</ul></li>
<li><a href="#upgrading">Upgrading</a></li>
<li><a href="#the-aclpolicy-markup-by-example">The aclpolicy markup by example</a></li>
<li><a href="#context"><code>context</code></a></li>
<li><a href="#for"><code>for</code></a><ul>
<li><a href="#type-rules">Type rules</a></li>
</ul></li>
<li><a href="#by"><code>by</code></a></li>
<li><a href="#notby"><code>notBy</code></a><ul>
<li><a href="#actions-element"><code>actions</code> element</a></li>
</ul></li>
<li><a href="#example-admin-policy">Example Admin policy</a></li>
</ul></li>
</ul>
</div>
</div>
</section>
<div class="column">
<section class="section content">
<div class="page-header">
<h1 class="title">ACLPOLICY</h1>
</div>
<h1 id="overview">Overview</h1>
<p>This document describes the YAML format for ACL Policy definition files.</p>
<p>Multiple aclpolicy files can be stored in the same directory, helping the management of each set of rules. This reduces the complexity of each file. The default path is</p>
<ul>
<li>RPM install: <code>/etc/rundeck</code></li>
<li>Launcher install: <code>$RDECK_BASE/etc</code></li>
</ul>
<p>Policy files are parsed using YAML and while the structure is rigid, additional information can be added and safely ignored. So creating arbitrary elements for documentation or organizational purposes is gracefully parsed.<br />
The resulting file must be a valid yaml file.</p>
<p>For more information about the exact resources and actions you need to authorize for the Rundeck application, see the <a href="../administration/security/access-control-policy.html#rundeck-resource-authorizations" title="Administrator Guide - Security - Access Control Policy - Rundeck Resource Authorizations">Administration Guide - Authorization</a>.</p>
<h2 id="authorizing-a-certain-action-on-a-resource">Authorizing a certain action on a resource</h2>
<p>The aclpolicy describes actions that are allowed or denied on certain resources.</p>
<p>The method for determining whether a user has access to perform such an action happens essentially in this way:</p>
<ol type="1">
<li>Look for policies matching the username or group for the user</li>
<li>Look for a context matching the environment of the given resource
<ul>
<li>either a specific project by name</li>
<li>or the application level</li>
</ul></li>
<li>Look for a Type rule for the type of resource
<ul>
<li>either a specific resource by its named type</li>
<li>or the generic “resource”</li>
</ul></li>
<li>Iterate through the rules for the type
<ul>
<li>if a rule matches, and allows the action, mark it and continue.</li>
<li>if a rule matches and denies the action, return DENIED, and stop</li>
</ul></li>
<li>If it was DENIED, return DENIED. If it was marked, return ALLOWED. Otherwise if no rules matched, return REJECTED.</li>
</ol>
<p>Thus to allow an action, there has to be a matching rule that allows it, and no matching rule that denies it.</p>
<h2 id="changes">Changes</h2>
<p>The YAML format has changed since version 1.2 to address several issues:</p>
<ol type="1">
<li>Access control on resources other than Jobs can now be declared</li>
<li>Project level access control is now supported</li>
<li>“Deny” rules can now be declared</li>
<li>Application level access control is also supported, replacing the Role mapping</li>
</ol>
<p>The Rundeck server no longer uses role-mapping and instead defers to the aclpolicy for all authorizations.</p>
<h3 id="in-version-1.5">In version 1.5</h3>
<ul>
<li><code>by</code> clause <code>username:</code> and <code>group:</code> now support regular expression matching</li>
<li>legacy XML support has been removed</li>
<li>legacy <code>rules:</code> section in yaml support has been removed</li>
</ul>
<h3 id="in-version-3.1">In version 3.1</h3>
<ul>
<li><code>notBy</code> clause as a negative variant of <code>by</code> clause</li>
</ul>
<h2 id="upgrading">Upgrading</h2>
<p>Note: The XML format from Rundeck 1.3 and earlier is no longer supported. As well, the YAML format from 1.2 is now only partially supported.</p>
<p>If you are upgrading from Rundeck 1.3 or earlier, you will have to modify your *.aclpolicy files.</p>
<p>If you have XML formatted files, you will need to remove and replace them with a YAML document in the format described below. A full, admin-level ACL is described at the end of this document.</p>
<p>If you have YAML formatted files, you will also need to upgrade them slightly.</p>
<h2 id="the-aclpolicy-markup-by-example">The aclpolicy markup by example</h2>
<p>An example policy document.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource yaml numberLines"><code class="sourceCode yaml"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="fu">description:</span><span class="at"> Yaml Policy 1</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="fu">context:</span><span class="at"> </span><span class="co"># declares the context of the ACL</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="fu">project:</span><span class="at"> </span><span class="st">&#39;.*&#39;</span><span class="er"> # applies to projects matching a regex.</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="fu">for:</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  <span class="fu">resource:</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">     <span class="kw">-</span> <span class="fu">equals:</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">        <span class="fu">kind:</span><span class="at"> job</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">       <span class="fu">allow:</span><span class="at"> </span><span class="st">&#39;*&#39;</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  <span class="fu">job:</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">     <span class="kw">-</span> <span class="fu">allow:</span><span class="at"> </span><span class="st">&#39;*&#39;</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">     <span class="kw">-</span> <span class="fu">match:</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">         <span class="fu">group:</span><span class="at"> </span><span class="st">&#39;group1/.*&#39;</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13">       <span class="fu">deny:</span><span class="at"> </span><span class="st">&#39;*&#39;</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="fu">by:</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16">    <span class="fu">username:</span><span class="at"> </span><span class="st">&#39;yml_usr_1&#39;</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17">    <span class="fu">group:</span><span class="at"> </span><span class="kw">[</span><span class="st">&#39;yml_group_1&#39;</span><span class="kw">,</span><span class="st">&#39;group2&#39;</span><span class="kw">]</span></a></code></pre></div>
<p>An .aclpolicy supports multiple policy definitions in the form of YAML documents using the <code>---</code> separator. There are four elements that make a policy definition: <code>decription</code>, <code>context</code>, <code>for</code>, <code>by</code>.</p>
<p>It’s recommended that this description be short and descriptive as it appears in the log output.</p>
<h2 id="context"><code>context</code></h2>
<p>The <code>context</code> section declares the scope of the ensuing policy description.</p>
<p>The <code>context</code> can contain one of two things:</p>
<ol type="1">
<li><code>project</code></li>
<li><code>application</code></li>
</ol>
<p>Declaring a <code>project:</code> declares the name of the project(s) for which the policy applies. Its value is a String, and can be a regular expression, for which the project name must match to apply.</p>
<p>If you declare an <code>application</code> section, its only supported value is <code>rundeck</code>, as: context: application: ‘rundeck’</p>
<p>This declares that the policy document describes access control at the application level, rather than for at a project level. You can then declare access control on actions such as creating Projects.</p>
<p>Note that to provide a full “admin” level access control for a user or group, then two policies must be defined, for application level as well as for project level.</p>
<p><strong>NOTE</strong> if you are upgrading a yaml 1.2 format document, you will need to add a <code>context</code> section.</p>
<h2 id="for"><code>for</code></h2>
<p>The <code>for</code> section declares a set of resource types, each containing a sequence of matching rules which allow or deny certain actions.</p>
<p>Resource types declare the type of a specific resource for the match, and the generic “resource” is used to declare rules for all resources of a certain type.</p>
<p>Inside <code>for</code> is an entry for any of these resource types:</p>
<ul>
<li><code>job</code> - a Rundeck Job</li>
<li><code>node</code> - a Node resource</li>
<li><code>adhoc</code> - an Ad-hoc execution</li>
<li><code>project</code> - a Project</li>
<li><code>resource</code> - indicates rules for all resources of a certain kind</li>
</ul>
<p>Within each type section is a sequence of rules. Recall that in YAML, a sequence is defined using multiple <code>-</code> indicators, or within <code>[</code> and <code>]</code> and separated by commas.</p>
<p>Yaml sequences:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb2-1" data-line-number="1">    <span class="kw">-</span> a</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">    <span class="kw">-</span> b</a></code></pre></div>
<p>also:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb3-1" data-line-number="1">    <span class="kw">[</span> a<span class="kw">,</span> b <span class="kw">]</span></a></code></pre></div>
<h3 id="type-rules">Type rules</h3>
<p>Type rules are in the form:</p>
<pre><code>matching*:
 property: value
allow: actions
deny: actions</code></pre>
<p>Each rule has one or more of these Action entries:</p>
<ul>
<li><code>allow</code> - (List or String) - the actions allowed</li>
<li><code>deny</code> - (List or String) - the actions denied</li>
</ul>
<p>It also has one or more of these “Matching” entries:</p>
<ul>
<li><code>match</code> - (List or String) - regular expression matches</li>
<li><code>equals</code> - (String) - equality matches</li>
<li><code>contains</code> - (List or String) - superset membership matches</li>
<li><code>subset</code> - (List or String) - subset membership matches</li>
</ul>
<p>Each Matching entry is composed of <code>property: value</code>, which declare what property of the resource to test, and what value or values to apply the matching rule to.</p>
<p>For example, to declare a rule for a resource with a “name” property of “bob” exactly, use <code>equals</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb5-1" data-line-number="1">    <span class="fu">equals:</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">      <span class="fu">name:</span><span class="at"> bob</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>action1<span class="kw">,</span> action2<span class="kw">]</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">    <span class="fu">deny:</span><span class="at"> action3</span></a></code></pre></div>
<p>For regular expression matching, use <code>match</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb6-1" data-line-number="1">    <span class="fu">match:</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">      <span class="fu">name:</span><span class="at"> </span><span class="st">&#39;bob|sam&#39;</span></a></code></pre></div>
<p>For set membership matches, such as matching a Node that must have three different tags, you can use <code>contains</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb7-1" data-line-number="1">    <span class="fu">contains:</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">      <span class="fu">tags:</span><span class="at"> </span><span class="kw">[</span>a<span class="kw">,</span>b<span class="kw">,</span>c<span class="kw">]</span></a></code></pre></div>
<p>The <code>match</code> and <code>contains</code> allow a list of property values, and all of them must match the resource’s property for the rule to match. This allows the basic boolean AND logic. For OR logic, you can simply declare another rule in the sequence since all rules are checked (except in the case of an explicit deny).</p>
<p>The <code>subset</code> match allows a list of property values, and will fail if the resource has any values <em>not</em> included in the subset.</p>
<h2 id="by"><code>by</code></h2>
<p>Within <code>by</code> are <code>username</code> and <code>group</code> entries that declare who the policy applies to.</p>
<p>Each entry can contain a single string, or a sequence of strings to define multiple entries.</p>
<p>Regular expressions are supported in the username or group.</p>
<p>A single match will result in further evaluation of the policy.</p>
<p>Examples:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb8-1" data-line-number="1">    <span class="fu">by:</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">      <span class="fu">username:</span><span class="at"> </span><span class="st">&#39;bob&#39;</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">    <span class="fu">by:</span><span class="at"> </span><span class="co">#using a regular expression</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">      <span class="fu">username:</span><span class="at"> </span><span class="st">&#39;dev\d+&#39;</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">    <span class="fu">by:</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">      <span class="fu">group:</span><span class="at"> </span><span class="kw">[</span>test<span class="kw">,</span>qa<span class="kw">,</span>prod<span class="kw">]</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"></a>
<a class="sourceLine" id="cb8-10" data-line-number="10">    <span class="fu">by:</span><span class="at"> </span><span class="co">#using a regular expression</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11">      <span class="fu">group:</span><span class="at"> </span><span class="st">&#39;dev_team_(alpha|beta|gamma)&#39;</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"></a>
<a class="sourceLine" id="cb8-13" data-line-number="13">    <span class="fu">by:</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14">      <span class="fu">username:</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15">        <span class="kw">-</span> simon</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">        <span class="kw">-</span> frank</a></code></pre></div>
<h2 id="notby"><code>notBy</code></h2>
<p><code>notBy</code> is a variation of the <code>by</code> clause that only works on <code>deny</code>, it follow the same pattern using <code>username</code> and <code>group</code> entries but in this case, the policy applies to anyone not in the group or with a different username.</p>
<p>Each entry can contain a single string, or a sequence of strings to define multiple entries.</p>
<p>Regular expressions are supported in the username or group.</p>
<p>Examples:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb9-1" data-line-number="1">    <span class="fu">notBy:</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">      <span class="fu">username:</span><span class="at"> </span><span class="st">&#39;bob&#39;</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">    <span class="fu">notBy:</span><span class="at"> </span><span class="co">#using a regular expression</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">      <span class="fu">username:</span><span class="at"> </span><span class="st">&#39;dev\d+&#39;</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"></a>
<a class="sourceLine" id="cb9-7" data-line-number="7">    <span class="fu">notBy:</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8">      <span class="fu">group:</span><span class="at"> </span><span class="kw">[</span>test<span class="kw">,</span>qa<span class="kw">,</span>prod<span class="kw">]</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"></a>
<a class="sourceLine" id="cb9-10" data-line-number="10">    <span class="fu">notBy:</span><span class="at"> </span><span class="co">#using a regular expression</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11">      <span class="fu">group:</span><span class="at"> </span><span class="st">&#39;dev_team_(alpha|beta|gamma)&#39;</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"></a>
<a class="sourceLine" id="cb9-13" data-line-number="13">    <span class="fu">notBy:</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14">      <span class="fu">username:</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15">        <span class="kw">-</span> simon</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">        <span class="kw">-</span> frank</a></code></pre></div>
<h3 id="actions-element"><code>actions</code> element</h3>
<p>The actions element can be either a single value, or a list of values. A single value takes the form:</p>
<pre><code>actions: &#39;an_action&#39;</code></pre>
<p>And a list takes the form:</p>
<pre><code>actions: [&#39;an_action1&#39;,&#39;an_action2&#39;]</code></pre>
<p>Note that the single tick marks are optional according to the yaml specification.</p>
<p>Possible values are limitless so it requires an understanding of the job definition you’re trying to run. The best way to understand what the actions are is to look at the rundeck-audit.log. This will show all the options as they’re being evaluated.</p>
<h2 id="example-admin-policy">Example Admin policy</h2>
<p>This document grants full permissions to an ‘admin’ role:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource yaml numberLines"><code class="sourceCode yaml"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="fu">description:</span><span class="at"> Admin project level access control. Applies to resources within a specific project.</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="fu">context:</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3">  <span class="fu">project:</span><span class="at"> </span><span class="st">&#39;.*&#39;</span><span class="er"> # all projects</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="fu">for:</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5">  <span class="fu">resource:</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6">    <span class="kw">-</span> <span class="fu">equals:</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7">        <span class="fu">kind:</span><span class="at"> job</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">      <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>create<span class="kw">]</span><span class="at"> </span><span class="co"># allow create jobs</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9">    <span class="kw">-</span> <span class="fu">equals:</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10">        <span class="fu">kind:</span><span class="at"> node</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11">      <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>read<span class="kw">,</span>create<span class="kw">,</span>update<span class="kw">,</span>refresh<span class="kw">]</span><span class="at"> </span><span class="co"># allow refresh node sources</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12">    <span class="kw">-</span> <span class="fu">equals:</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13">        <span class="fu">kind:</span><span class="at"> event</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14">      <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>read<span class="kw">,</span>create<span class="kw">]</span><span class="at"> </span><span class="co"># allow read/create events</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15">  <span class="fu">adhoc:</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16">    <span class="kw">-</span> <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>read<span class="kw">,</span>run<span class="kw">,</span>runAs<span class="kw">,</span>kill<span class="kw">,</span>killAs<span class="kw">]</span><span class="at"> </span><span class="co"># allow running/killing adhoc jobs</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17">  <span class="fu">job:</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18">    <span class="kw">-</span> <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>create<span class="kw">,</span>read<span class="kw">,</span>update<span class="kw">,</span>delete<span class="kw">,</span>run<span class="kw">,</span>runAs<span class="kw">,</span>kill<span class="kw">,</span>killAs<span class="kw">]</span><span class="at"> </span><span class="co"># allow create/read/write/delete/run/kill of all jobs</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19">  <span class="fu">node:</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20">    <span class="kw">-</span> <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>read<span class="kw">,</span>run<span class="kw">]</span><span class="at"> </span><span class="co"># allow read/run for nodes</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="fu">by:</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22">  <span class="fu">group:</span><span class="at"> admin</span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"></a>
<a class="sourceLine" id="cb12-24" data-line-number="24"><span class="ot">---</span></a>
<a class="sourceLine" id="cb12-25" data-line-number="25"></a>
<a class="sourceLine" id="cb12-26" data-line-number="26"><span class="fu">description:</span><span class="at"> Admin Application level access control, applies to creating/deleting projects, admin of user profiles, viewing projects and reading system information.</span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27"><span class="fu">context:</span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28">  <span class="fu">application:</span><span class="at"> </span><span class="st">&#39;rundeck&#39;</span></a>
<a class="sourceLine" id="cb12-29" data-line-number="29"><span class="fu">for:</span></a>
<a class="sourceLine" id="cb12-30" data-line-number="30">  <span class="fu">resource:</span></a>
<a class="sourceLine" id="cb12-31" data-line-number="31">    <span class="kw">-</span> <span class="fu">equals:</span></a>
<a class="sourceLine" id="cb12-32" data-line-number="32">        <span class="fu">kind:</span><span class="at"> project</span></a>
<a class="sourceLine" id="cb12-33" data-line-number="33">      <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>create<span class="kw">]</span><span class="at"> </span><span class="co"># allow create of projects</span></a>
<a class="sourceLine" id="cb12-34" data-line-number="34">    <span class="kw">-</span> <span class="fu">equals:</span></a>
<a class="sourceLine" id="cb12-35" data-line-number="35">        <span class="fu">kind:</span><span class="at"> system</span></a>
<a class="sourceLine" id="cb12-36" data-line-number="36">      <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>read<span class="kw">,</span>enable_executions<span class="kw">,</span>disable_executions<span class="kw">,</span>admin<span class="kw">]</span><span class="at"> </span><span class="co"># allow read of system info, enable/disable all executions</span></a>
<a class="sourceLine" id="cb12-37" data-line-number="37">    <span class="kw">-</span> <span class="fu">equals:</span></a>
<a class="sourceLine" id="cb12-38" data-line-number="38">        <span class="fu">kind:</span><span class="at"> system_acl</span></a>
<a class="sourceLine" id="cb12-39" data-line-number="39">      <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>read<span class="kw">,</span>create<span class="kw">,</span>update<span class="kw">,</span>delete<span class="kw">,</span>admin<span class="kw">]</span><span class="at"> </span><span class="co"># allow modifying system ACL files</span></a>
<a class="sourceLine" id="cb12-40" data-line-number="40">    <span class="kw">-</span> <span class="fu">equals:</span></a>
<a class="sourceLine" id="cb12-41" data-line-number="41">        <span class="fu">kind:</span><span class="at"> user</span></a>
<a class="sourceLine" id="cb12-42" data-line-number="42">      <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>admin<span class="kw">]</span><span class="at"> </span><span class="co"># allow modify user profiles</span></a>
<a class="sourceLine" id="cb12-43" data-line-number="43">  <span class="fu">project:</span></a>
<a class="sourceLine" id="cb12-44" data-line-number="44">    <span class="kw">-</span> <span class="fu">match:</span></a>
<a class="sourceLine" id="cb12-45" data-line-number="45">        <span class="fu">name:</span><span class="at"> </span><span class="st">&#39;.*&#39;</span></a>
<a class="sourceLine" id="cb12-46" data-line-number="46">      <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>read<span class="kw">,</span>import<span class="kw">,</span>export<span class="kw">,</span>configure<span class="kw">,</span>delete<span class="kw">,</span>admin<span class="kw">]</span><span class="at"> </span><span class="co"># allow full access of all projects or use &#39;admin&#39;</span></a>
<a class="sourceLine" id="cb12-47" data-line-number="47">  <span class="fu">project_acl:</span></a>
<a class="sourceLine" id="cb12-48" data-line-number="48">    <span class="kw">-</span> <span class="fu">match:</span></a>
<a class="sourceLine" id="cb12-49" data-line-number="49">        <span class="fu">name:</span><span class="at"> </span><span class="st">&#39;.*&#39;</span></a>
<a class="sourceLine" id="cb12-50" data-line-number="50">      <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>read<span class="kw">,</span>create<span class="kw">,</span>update<span class="kw">,</span>delete<span class="kw">,</span>admin<span class="kw">]</span><span class="at"> </span><span class="co"># allow modifying project-specific ACL files</span></a>
<a class="sourceLine" id="cb12-51" data-line-number="51">  <span class="fu">storage:</span></a>
<a class="sourceLine" id="cb12-52" data-line-number="52">    <span class="kw">-</span> <span class="fu">allow:</span><span class="at"> </span><span class="kw">[</span>read<span class="kw">,</span>create<span class="kw">,</span>update<span class="kw">,</span>delete<span class="kw">]</span><span class="at"> </span><span class="co"># allow access for /ssh-key/* storage content</span></a>
<a class="sourceLine" id="cb12-53" data-line-number="53"></a>
<a class="sourceLine" id="cb12-54" data-line-number="54"><span class="fu">by:</span></a>
<a class="sourceLine" id="cb12-55" data-line-number="55">  <span class="fu">group:</span><span class="at"> admin</span></a></code></pre></div>
</section>
</div>
</div>
</div>
</div>
<div class="container">
    <nav class="breadcrumb" aria-label="breadcrumbs">
        <div class="columns">
            <div class="column is-two-thirds">
            <ul>
                
                    
                        <li><a href="../index.html">Rundeck Documentation (3.1.x)</a></li>
                    
                
                <li ><a href="index.html">Document Format Reference</a></li>
                <li class="active"><a href="aclpolicy.html">ACLPOLICY</a></li>
            </ul>
            </div>
            <div class="column">
            <ul>
                
                <li class="next"><a href="job-xml.html">JOB-XML <i class="fas fa-arrow-right"></i></a></li>
            </ul>
            </div>
        </div>
    </nav>
    <div class="breadcrumb-footer">
        <a class="btn btn-link bottom" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+manpages/man5/aclpolicy-v10.md&template=documentation-bug.md"> <i class="fas fa-flag"></i> Report a problem </a>
        <a class="btn btn-link bottom btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/manpages/man5/aclpolicy-v10.md"><i class="fas fa-pencil-alt"></i> Edit this page</a>
    </div>
</div>
<footer class="brand-footer">
  <div class="container">
    <div class="columns" style="margin-bottom:0;padding-top:5em;padding-bottom:5em">
      <div class="column is-1" style="padding-top:1.3em"><span><svg width="39" height="40" viewBox="0 0 39 40"
            xmlns="http://www.w3.org/2000/svg">
            <g fill="#F7403A" fill-rule="evenodd">
              <path
                d="M0 39.175h26.17l4.883-7.702H4.883zM31.053 8.368L26.17.665H0l4.883 7.703zM35.936 16.07H9.766l2.44 3.85-2.44 3.851h26.17l2.44-3.852z">
              </path>
            </g>
          </svg></span></div>
      <div class="column is-4">
        <div class="contact"><a href="tel:8336774376" class="phone is-size-3 has-text-weight-bold">(833) OPS-HERO</a>
          <div class="address address has-text-weight-bold is-size-5" style="margin-top:1em">2317
            Broadway, Suite 130
            <br>Redwood City, CA 94063
          </div>
          <div>
            <ul class="social-links">
              <li class="social-link"><a href="https://www.linkedin.com/company/17928739" role="menuitem"
                  target="_blank" aria-label="Linkedin" class="button social-link__icon"><svg aria-hidden="true"
                    focusable="false" data-prefix="fab" data-icon="linkedin" role="img"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                    class="svg-inline--fa fa-linkedin fa-w-14">
                    <path fill="currentColor"
                      d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"
                      class=""></path>
                  </svg></a></li>
              <li class="social-link"><a href="https://twitter.com/rundeck" role="menuitem" target="_blank"
                  aria-label="Twitter" class="button social-link__icon"><svg aria-hidden="true" focusable="false"
                    data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16">
                    <path fill="currentColor"
                      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"
                      class=""></path>
                  </svg></a></li>
            </ul>
          </div>
          <div class="copyright">
            <span class="copyright-text" style="font-weight:500;font-size:14px">©2019 Rundeck.
              All Rights Reserved.</span> 
              <br />
              <span class="generated-date" title="2019-07-18T21:45:23UTC">2019-07-18T21:45:23UTC</span>
          </div>
        </div>
      </div>
      <div class="column">
        <ul class="marketing-site-nav is-size-5 has-text-weight-semibold">
          <li><a href="https://www.rundeck.com/about" role="menuitem">About</a>
          </li>
          <li><a href="https://www.rundeck.com/about/team" role="menuitem">Team</a></li>
          <li><a href="https://www.rundeck.com/careers" role="menuitem">Careers</a></li>
          <li><a href="https://www.rundeck.com/news" role="menuitem">News</a>
          </li>
          <li><a href="https://www.rundeck.com/events" role="menuitem">Events</a>
          </li>
          <li><a href="https://www.rundeck.com/privacy-policy" role="menuitem">Privacy Policy</a></li>
          <li><a href="https://www.rundeck.com/terms" role="menuitem">Terms of
              Use</a></li>
          <li><a href="https://www.rundeck.com/contact" role="menuitem">Contact</a></li>
          <li><a href="https://www.rundeck.com/demo" role="menuitem">Request a
              Demo</a></li>
        </ul>
      </div>
    </div>
    <div class="creative-commons">
      <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Rundeck Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://rundeck.com" property="cc:attributionName" rel="cc:attributionURL">Rundeck, Inc</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License. </a>
    </div>
  </div>
</footer>

<script type="text/javascript">
   var _gaq = [['_setAccount', 'UA-529275-13'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>

<script>window.markdeepOptions={mode:'html'};</script>
<!-- Markdeep: --><script src="../markdeep.min.js"></script>
<!-- <script src="https://casual-effects.com/markdeep/latest/markdeep.min.js"></script> -->

<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/2768099.js"></script>
<!-- End of HubSpot Embed Code -->
<div class='scrolltop'>
<div class='scrollitem icon'>
<i class="fas fa-chevron-up" ></i>
</div>
</div>
</body>
</html>
