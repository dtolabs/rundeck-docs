<!DOCTYPE html>
<html>
<head>
  <title>File Copier Plugin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Greg Schueler, Alex Honor" />
  <meta name="date" content="November 20, 2010" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(function(){
  jQuery('table').addClass('table table-condensed table-responsive'); 
  jQuery('[data-toggle="popover"]').popover();
});
</script>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../style.css" type="text/css" />
</head>
<body data-spy="scroll" data-target=".toc-nav">
<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="container-fluid">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="https://www.rundeck.com/open-source">
      Rundeck
      <p class="small rd_version">‚Üê Return to Rundeck Project</p>
    </a>
  </div>
  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <form class="navbar-form navbar-right" role="search"  action="http://rundeck.org/search/">
      <div class="form-group">
        <input type="text" class="form-control" name="q" placeholder="Search">
      </div>
      <button type="submit" class="btn btn-default">Submit</button>
    </form>
  </div>
  </div>
</nav>

<div class="container top breadcrumb_holder">
<div class="row">
<div class="col-sm-6">
<ol class="breadcrumb top">

    
        <li><a href="../index.html">Rundeck Documentation (3.0.0)</a></li>
    
    
    <li ><a href="index.html">Plugin Developer Guide</a></li>
    <li class="active"><a href="file-copier-plugin.html">File Copier Plugin</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="workflow-step-plugin.html"><i class="glyphicon glyphicon-arrow-left"></i> Workflow Step Plugin</a></li>
      <li class="next"><a href="node-executor-plugin.html">Node Executor Plugin <i class="glyphicon glyphicon-arrow-right"></i></a></li>
    </ul>
</div>
</div>
<div class="row">
<div class="col-sm-12 text-right">
    <a class="btn btn-link top" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug"><i class="glyphicon glyphicon-flag"></i> Report a problem</a>
    <a class="btn btn-link top btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/developer/04-file-copier-plugins.md"><i class="glyphicon glyphicon-pencil"></i>  Edit this page</a>
</div>
</div>
</div>
<div id="docbody">
<div class="container">
<div class="row">
<div class="col-sm-3 toc-nav">
<div class="nav">
<ul>
<li><a href="#about">About</a></li>
<li><a href="#java-plugin-type">Java Plugin Type</a><ul>
<li><a href="#plugin-properties">Plugin properties</a></li>
</ul></li>
<li><a href="#script-plugin-type">Script Plugin Type</a><ul>
<li><a href="#additional-data-context-properties">Additional data context properties</a></li>
<li><a href="#provider-script-requirements">Provider Script Requirements</a></li>
</ul></li>
</ul>
</div>
</div>
<div class="col-sm-9">
<div class="page-header">
<h1 class="title">File Copier Plugin</h1>
</div>
<h2 id="about">About</h2>
<p>A File Copier provider copies a file or script to a remote or local node.</p>
<h2 id="java-plugin-type">Java Plugin Type</h2>
<p>Your provider class must implement the interface <a href="../javadoc/com/dtolabs/rundeck/core/execution/service/FileCopier.html">FileCopier</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">public</span> <span class="kw">interface</span> FileCopier {</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">copyFileStream</span>(ExecutionContext context,</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">                                 <span class="bu">InputStream</span> input,</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">                                 INodeEntry node,</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">                                 <span class="bu">String</span> destination) <span class="kw">throws</span> FileCopierException;</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">copyFile</span>(ExecutionContext context,</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">                           <span class="bu">File</span> file,</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">                           INodeEntry node,</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">                           <span class="bu">String</span> destination) <span class="kw">throws</span> FileCopierException;</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"></a>
<a class="sourceLine" id="cb1-13" data-line-number="13">    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">copyScriptContent</span>(ExecutionContext context,</a>
<a class="sourceLine" id="cb1-14" data-line-number="14">                                    <span class="bu">String</span> script,</a>
<a class="sourceLine" id="cb1-15" data-line-number="15">                                    INodeEntry node,</a>
<a class="sourceLine" id="cb1-16" data-line-number="16">                                    <span class="bu">String</span> destination) <span class="kw">throws</span> FileCopierException;</a>
<a class="sourceLine" id="cb1-17" data-line-number="17">}</a></code></pre></div>
<p>(Note: Change between Rundeck 2.7 and 2.8: File copier plugins now require implementation of <code>FileCopier</code>. Previously the <a href="../javadoc/com/dtolabs/rundeck/core/execution/service/DestinationFileCopier.html"><code>DestinationFileCopier</code></a> was required. Older methods of FileCopier have been removed from the interface.)</p>
<p>Optionally the plugin may implement <a href="../javadoc/com/dtolabs/rundeck/core/execution/service/MultiFileCopier.html">MultiFileCopier</a> to more efficiently copy multiple files.</p>
<h3 id="plugin-properties">Plugin properties</h3>
<p>See <a href="plugin-development.html#plugin-descriptions">Plugin Development - Java Plugins - Descriptions</a> to learn how to create configuration properties for your plugin.</p>
<blockquote>
<p>Note, the <code>destination</code> parameter may or may not be specified. If it is not null, it indicates that the file must be copied to the requested destination filepath. If it is null, it indicates that the copied file is likely a script file, and it should be copied to a temporary file location. In either case, the resulting file path must be returned as the result of the method call.</p>
</blockquote>
<h2 id="script-plugin-type">Script Plugin Type</h2>
<p>See the <a href="plugin-development.html#script-plugin-development">Script Plugin Development</a> for the basics of developing script-based plugins for Rundeck.</p>
<h3 id="additional-data-context-properties">Additional data context properties</h3>
<p>The data context used in the script plugin definition can use these additional properties:</p>
<dl>
<dt><code>${file-copy.file}</code></dt>
<dd><p>The local path to the file that needs to be copied.</p>
</dd>
<dt><code>${file-copy.destination}</code></dt>
<dd><p>The remote destination path that is requested, if available.</p>
</dd>
</dl>
<h3 id="provider-script-requirements">Provider Script Requirements</h3>
<p>The specific service has expectations about the way your provider script behaves:</p>
<h4 id="script-exit-code">Script Exit Code</h4>
<ul>
<li>Exit code of 0 indicates success.</li>
<li>Any other exit code indicates failure.</li>
</ul>
<h4 id="script-output">Script Output</h4>
<p>The first line of output of <code>STDOUT</code> MUST be the filepath of the file copied to the target node. Other output is ignored. All output to <code>STDERR</code> will be captured for the job‚Äôs output.</p>
</div>
</div>
</div>
</div>

<div class="container bottom breadcrumb_holder">
<div class="row">
<div class="col-sm-6">
<ol class="breadcrumb bottom">

    
        <li><a href="../index.html">Rundeck Documentation (3.0.0)</a></li>
    
    
    <li ><a href="index.html">Plugin Developer Guide</a></li>
    <li class="active"><a href="file-copier-plugin.html">File Copier Plugin</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="workflow-step-plugin.html"><i class="glyphicon glyphicon-arrow-left"></i> Workflow Step Plugin</a></li>
      <li class="next"><a href="node-executor-plugin.html">Node Executor Plugin <i class="glyphicon glyphicon-arrow-right"></i></a></li>
    </ul>
</div>
</div>
<div class="row">
<div class="col-sm-12 text-right">
    <a class="btn btn-link bottom" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug"><i class="glyphicon glyphicon-flag"></i> Report a problem</a>
    <a class="btn btn-link bottom btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/developer/04-file-copier-plugins.md"><i class="glyphicon glyphicon-pencil"></i>  Edit this page</a>
</div>
</div>
</div>
<div class='container footer'>

<div class="row">
	<footer class="copy col-sm-12 text-muted">

<p>
<a class="btn btn-info btn-try-rundeck-pro" href="http://rundeck.com/" data-toggle="popover" data-trigger="hover" 
data-content="<ul class=&quot;list-unstyled&quot;>
	<li><i class=&quot;glyphicon glyphicon-gift&quot;></i> Try Rundeck Pro for Free</li>
	<li><i class=&quot;glyphicon glyphicon-flash&quot;></i> Get Exclusive Features</li>
	<li><i class=&quot;glyphicon glyphicon-briefcase&quot;></i> Get Professional Support</li>
	<li><i class=&quot;glyphicon glyphicon-heart&quot;></i> Support Open-source Development</li>
	<li><i class=&quot;glyphicon glyphicon-thumbs-up&quot;></i> Get home by 5 </li>
</ul>" data-html="true">
<i class="glyphicon glyphicon-hand-right"></i>
Try Rundeck Pro
</a>
</p>

<span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Rundeck Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://simplifyops.com" property="cc:attributionName" rel="cc:attributionURL">Rundeck, Inc</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
<p>
&copy;2018 <a href="http://rundeck.com">Rundeck</a>
</p>
<p>
<span class="generated-date" title="2018-08-02T19:08:09UTC">2018-08-02T19:08:09UTC</span>
</p>
</footer>
</div>
</div>
<script type="text/javascript">
  

   var _gaq = [['_setAccount', 'UA-529275-13'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>
<!-- Start of HubSpot Embed Code -->
<script type=‚Äútext/javascript‚Äù id=‚Äúhs-script-loader‚Äù async defer src=‚Äú//js.hs-scripts.com/2768099.js‚Äù></script>
<!-- End of HubSpot Embed Code -->
</body>
</html>
