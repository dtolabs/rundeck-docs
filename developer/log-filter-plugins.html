<!DOCTYPE html>
<html>
<head>
  <title>Log Filter Plugins</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Greg Schueler" />
  <meta name="date" content="April 26, 2018" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">

<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="../jquery.hotkeys.js"></script>
<script src="../jquery.autocomplete.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript">
window._pageRelpath="../";
jQuery(function(){
  jQuery('table').addClass('table table-condensed table-responsive'); 
  jQuery('[data-toggle="popover"]').popover();
});
</script>
<script src="../docs-autocomplete.js"></script>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../style.css" type="text/css" />
</head>
<body data-spy="scroll" data-target=".toc-nav">
<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="container-fluid">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="https://www.rundeck.com/open-source">
      Rundeck
      <p class="small rd_version">‚Üê Return to Rundeck Project</p>
    </a>
  </div>
  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <form class="navbar-form navbar-right" role="search"  action="/search/">
      <div class="form-group">
        <input type="text" class="form-control navquery" name="q" placeholder="Search" id="searchQuery">
      </div>
      <button type="submit" class="btn btn-default">Submit</button>
    </form>
  </div>
  </div>
</nav>

<div class="container top breadcrumb_holder">
<div class="row">
<div class="col-sm-6" id="#breadcrumbstop">

<div class="navquerytoggle collapse" aria-expanded="false">
<div class="input-group ">
    <a class="input-group-addon btn btn-xs" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbstop"><i class="glyphicon glyphicon-search"></i></a>
    <input type="text" class="form-control navquery  " name="q" placeholder="Search" autofocus="true">    
    <a class="input-group-addon btn btn-xs" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbstop"><i class="glyphicon glyphicon-remove"></i></a>
</div>
</div>

<ol class="breadcrumb top collapse in navquerytoggle" aria-expanded="true">
    <li class="navquerytrigger collapse" title="Find a page by name. (Keyboard shortcut: q)" data-toggle="tooltip" data-container="body">
        <a class="btn btn-xs btn-link" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbstop">
            <i class="glyphicon glyphicon-search"></i>
        </a>
    </li>

    
        <li><a href="../index.html">Rundeck Documentation (3.0.x)</a></li>
    
    
    <li ><a href="index.html">Plugin Developer Guide</a></li>
    <li class="active"><a href="log-filter-plugins.html">Log Filter Plugins</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="ui-plugins.html"><i class="glyphicon glyphicon-arrow-left"></i> UI Plugins</a></li>
      <li class="next"><a href="content-converter-plugins.html">Content Converter Plugins <i class="glyphicon glyphicon-arrow-right"></i></a></li>
    </ul>
</div>
</div>
<div class="row">
<div class="col-sm-12 text-right">
    <a class="btn btn-link top" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+developer/log-filter-plugins.md&template=documentation-bug.md"><i class="glyphicon glyphicon-flag"></i> Report a problem</a>
    <a class="btn btn-link top btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/developer/log-filter-plugins.md"><i class="glyphicon glyphicon-pencil"></i>  Edit this page</a>
</div>
</div>
</div>
<div id="docbody">
<div class="container">
<div class="row">
<div class="col-sm-3 toc-nav">
<div class="nav">
<ul>
<li><a href="#about">About</a></li>
<li><a href="#behavior">Behavior</a></li>
<li><a href="#java-plugin-type">Java Plugin Type</a><ul>
<li><a href="#groovy-logfilter">Groovy LogFilter</a></li>
</ul></li>
<li><a href="#localization">Localization</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#example-groovy-plugins">Example Groovy plugins</a></li>
</ul>
</div>
</div>
<div class="col-sm-9">
<div class="page-header">
<h1 class="title">Log Filter Plugins</h1>
</div>
<h2 id="about">About</h2>
<p>Log Filter plugins provide a way to process logging output from commands, scripts and other workflow step types. They can filter the output (remove, add, modify), or they can be used to capture or convert the output. They can also add metadata to the logs, or emit new log data.</p>
<p>Log Filter plugins implement the <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.0.x-20190222/com/dtolabs/rundeck/plugins/logging/LogFilterPlugin.html">LogFilterPlugin</a> interface, and provider the <code>LogFilter</code> service.</p>
<h2 id="behavior">Behavior</h2>
<p>Users creating Workflows can configure Log Filter plugins within their workflow in two ways:</p>
<ol type="1">
<li>At the top level, applying to all steps in the workflow</li>
<li>At a step level, applying only to specific step(s).</li>
</ol>
<h2 id="java-plugin-type">Java Plugin Type</h2>
<ul>
<li><em>Note</em>: Refer to <a href="plugin-development.html#java-plugin-development" title="Plugin Developer Guide - Plugin Development - Java Plugin Development">Java Development</a> for information about developing a Java plugin for Rundeck.</li>
</ul>
<p>The plugin interface is <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.0.x-20190222/com/dtolabs/rundeck/plugins/logging/LogFilterPlugin.html">LogFilterPlugin</a>. You can use the <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.0.x-20190222/com/dtolabs/rundeck/core/logging/PluginLoggingContext.html">PluginLoggingContext</a> to get the data context and add data to it via the Output context.</p>
<p>When the top level, or step level is ready, all configured Log Filter plugins will be initialized using the optional <code>init</code> method.</p>
<p>For each log event emitted within the configured level, each configured Log Filter plugin will have its <code>handleEvent</code> method called, in order, with a <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.0.x-20190222/com/dtolabs/rundeck/core/logging/LogEventControl.html">LogEventControl</a> instance. The LogEventControl can be used to get or modify the content of the <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.0.x-20190222/com/dtolabs/rundeck/core/logging/LogEvent.html">LogEvent</a> (message, type, level, metadata). It can also control how the log event is handled:</p>
<ul>
<li><code>emit</code>: the log should be emitted</li>
<li><code>quell</code>: the log should be futher processed, but not emitted in the final log</li>
<li><code>quiet</code>: the final loglevel should be set to VERBOSE</li>
<li><code>remove</code>: the log event should not be processed further</li>
</ul>
<h3 id="groovy-logfilter">Groovy LogFilter</h3>
<p>Create a groovy script that calls the <code>rundeckPlugin</code> method and passes the <code>LogFilterPlugin</code> as the type of plugin:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">import</span> com.dtolabs.rundeck.plugins.logging.LogFilterPlugin</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="fu">rundeckPlugin</span>(LogFilterPlugin){</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    <span class="co">//plugin definition</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">}</a></code></pre></div>
<p>To define metadata about your plugin, and configuration properties, see the <a href="plugin-development.html#groovy-plugin-development" title="Plugin Developer Guide - Plugin Development - Groovy Plugin Development">Plugin Development - Groovy Plugin Development</a> chapter.</p>
<p>The <code>LogFilterPlugin</code> Groovy DLS supports these closure definitions:</p>
<ul>
<li><code>init</code> initialization for the plugin (optional)</li>
<li><code>handleEvent</code> handle a log event (required)</li>
<li><code>complete</code> complete the log filter processing after all events have been handled (optional)</li>
</ul>
<p>Closure descriptions:</p>
<p><code>init</code></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"> <span class="co">*</span> Called to initialization the plugin with the context</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">init { PluginLoggingContext context, <span class="bu">Map</span> configuration -&gt;</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">    <span class="co">//perform initialization</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">}</a></code></pre></div>
<p><code>handleEvent</code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"> <span class="co">*</span> Called to initialization the plugin with the context</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">handleEvent { PluginLoggingContext context, LogEventControl event, <span class="bu">Map</span> configuration -&gt;</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">    <span class="co">//handle the event</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">}</a></code></pre></div>
<p><code>complete</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"> <span class="co">*</span> Called to complete the plugin processing</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">complete { PluginLoggingContext context, <span class="bu">Map</span> configuration -&gt;</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">    <span class="co">//finish</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">}</a></code></pre></div>
<h2 id="localization">Localization</h2>
<p>For the basics of plugin localization see: <a href="plugin-development.html#plugin-localization" title="Plugin Developer Guide - Plugin Development - Plugin Localization">Plugin Development - Plugin Localization</a>.</p>
<h2 id="example">Example</h2>
<p>Several built-in plugins are listed here:</p>
<ul>
<li><a href="https://github.com/rundeck/rundeck/tree/master/rundeckapp/src/groovy/com/dtolabs/rundeck/server/plugins/logging"><code>rundeckapp/src/groovy/com/dtolabs/rundeck/server/plugins/logging</code></a></li>
</ul>
<h2 id="example-groovy-plugins">Example Groovy plugins</h2>
<p>See <a href="https://github.com/rundeck/rundeck/tree/master/examples/example-groovy-log-filter-plugins" class="uri">https://github.com/rundeck/rundeck/tree/master/examples/example-groovy-log-filter-plugins</a>.</p>
</div>
</div>
</div>
</div>

<div class="container bottom breadcrumb_holder">
<div class="row">
<div class="col-sm-6" id="#breadcrumbsbottom">

<div class="navquerytoggle collapse" aria-expanded="false">
<div class="input-group ">
    <a class="input-group-addon btn btn-xs" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbsbottom"><i class="glyphicon glyphicon-search"></i></a>
    <input type="text" class="form-control navquery  " name="q" placeholder="Search" autofocus="true">    
    <a class="input-group-addon btn btn-xs" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbsbottom"><i class="glyphicon glyphicon-remove"></i></a>
</div>
</div>

<ol class="breadcrumb bottom collapse in navquerytoggle" aria-expanded="true">
    <li class="navquerytrigger collapse" title="Find a page by name. (Keyboard shortcut: q)" data-toggle="tooltip" data-container="body">
        <a class="btn btn-xs btn-link" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbsbottom">
            <i class="glyphicon glyphicon-search"></i>
        </a>
    </li>

    
        <li><a href="../index.html">Rundeck Documentation (3.0.x)</a></li>
    
    
    <li ><a href="index.html">Plugin Developer Guide</a></li>
    <li class="active"><a href="log-filter-plugins.html">Log Filter Plugins</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="ui-plugins.html"><i class="glyphicon glyphicon-arrow-left"></i> UI Plugins</a></li>
      <li class="next"><a href="content-converter-plugins.html">Content Converter Plugins <i class="glyphicon glyphicon-arrow-right"></i></a></li>
    </ul>
</div>
</div>
<div class="row">
<div class="col-sm-12 text-right">
    <a class="btn btn-link bottom" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+developer/log-filter-plugins.md&template=documentation-bug.md"><i class="glyphicon glyphicon-flag"></i> Report a problem</a>
    <a class="btn btn-link bottom btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/developer/log-filter-plugins.md"><i class="glyphicon glyphicon-pencil"></i>  Edit this page</a>
</div>
</div>
</div>
<div class='container footer'>

<div class="row">
	<footer class="copy col-sm-12 text-muted">

<p>
<a class="btn btn-info btn-try-rundeck-pro" href="http://rundeck.com/" data-toggle="popover" data-trigger="hover" 
data-content="<ul class=&quot;list-unstyled&quot;>
	<li><i class=&quot;glyphicon glyphicon-gift&quot;></i> Try Rundeck Enterprise for Free</li>
	<li><i class=&quot;glyphicon glyphicon-flash&quot;></i> Get Exclusive Features</li>
	<li><i class=&quot;glyphicon glyphicon-briefcase&quot;></i> Get Professional Support</li>
	<li><i class=&quot;glyphicon glyphicon-heart&quot;></i> Support Open-source Development</li>
	<li><i class=&quot;glyphicon glyphicon-thumbs-up&quot;></i> Get home by 5 </li>
</ul>" data-html="true">
<i class="glyphicon glyphicon-hand-right"></i>
Try Rundeck Enterprise
</a>
</p>

<span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Rundeck Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://rundeck.com" property="cc:attributionName" rel="cc:attributionURL">Rundeck, Inc</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
<p>
&copy;2019 <a href="http://rundeck.com">Rundeck</a>
</p>
<p>
<span class="generated-date" title="2019-02-23T05:31:12UTC">2019-02-23T05:31:12UTC</span>
</p>
</footer>
</div>
</div>
<script type="text/javascript">
  

   var _gaq = [['_setAccount', 'UA-529275-13'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>

<script>window.markdeepOptions={mode:'html'};</script>
<!-- Markdeep: --><script src="../markdeep.min.js"></script>
<!-- <script src="https://casual-effects.com/markdeep/latest/markdeep.min.js"></script> -->

<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/2768099.js"></script>
<!-- End of HubSpot Embed Code -->
</body>
</html>
