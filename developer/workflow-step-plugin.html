<!DOCTYPE html>
<html>
<head>
  <title>Workflow Step Plugin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Greg Schueler" />
  <meta name="date" content="December 10, 2012" />
<link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i" rel="stylesheet">
<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Latest compiled and minified JavaScript -->

<script type="text/javascript">
var jq = jQuery.noConflict();
jq(document).ready(function(){
  jq('.navbar-burger').click(function(){
    jq('.navbar-menu').toggle();
  });
})
jq(window).scroll(function() {
    if (jq(this).scrollTop() > 50 ) {
        jq('.scrolltop:hidden').stop(true, true).fadeIn();
    } else {
        jq('.scrolltop').stop(true, true).fadeOut();
    }
});
jq(function(){jq(".scrollitem").click(function(){jq("html,body").animate({scrollTop:jq("body").offset().top},"1000");return false})})
jq(window).scroll(function() {    
    var scroll = jq(window).scrollTop();
    if (scroll >= 250) {
      jq(".navbar").addClass("has-shadow");
    } else {
      jq(".navbar").removeClass("has-shadow");
    }
}); //missing );

window._pageRelpath="../";
jQuery(function(){
  jQuery('table').addClass('table table-condensed table-responsive'); 
  // jQuery('[data-toggle="popover"]').popover();
});
</script>

  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../styles.css" type="text/css" />
</head>
<body data-spy="scroll" data-target=".toc-nav" class="navbar-is-fixed-top">
<nav role="navigation" aria-label="main navigation" class="navbar is-fixed-top">
  <div class="container">
    <div class="navbar-brand"><a href="https://www.rundeck.com/open-source" class="navbar-item logo"><span
          data-v-ddc5174c=""><svg width="159" height="23" viewBox="0 0 159 23" xmlns="http://www.w3.org/2000/svg"
            class="logo-image" data-v-ddc5174c="">
            <g class="logo-type" fill="none" fill-rule="evenodd" data-v-ddc5174c="">
              <path
                d="M36.133 10.399v-6.26h1.073c2.78 0 4.17 1.01 4.17 3.028 0 2.155-1.43 3.232-4.285 3.232h-.959zm6.963.332c.813-1.005 1.219-2.206 1.219-3.603 0-1.788-.648-3.227-1.942-4.317-1.174-.98-3.081-1.47-5.722-1.47h-3.535v19.725h3.017v-8.074h.542l5.71 8.074h3.69l-6.189-8.407c1.33-.28 2.4-.923 3.21-1.928zM60.561 13.222c0 1.72-.28 2.96-.842 3.716-.836 1.134-2.02 1.7-3.547 1.7-1.52 0-2.697-.566-3.534-1.7-.56-.783-.84-2.021-.84-3.716V1.341H48.78V14.04c0 2.077.656 3.789 1.968 5.135 1.467 1.499 3.276 2.247 5.424 2.247 2.15 0 3.961-.748 5.438-2.247 1.312-1.346 1.967-3.058 1.967-5.135V1.341h-3.016v11.881zM82.944 15.048L68.367 0v21.065h3.016V7.256l14.577 15.01V1.341h-3.016zM100.938 16.428a6.872 6.872 0 0 1-2.434 1.418c-.897.282-2.024.422-3.379.422h-1.359V4.138h1.36c2.571 0 4.518.602 5.838 1.802 1.468 1.346 2.201 3.1 2.201 5.264 0 2.146-.742 3.887-2.227 5.224m2.175-12.544c-1.019-.92-2.153-1.571-3.404-1.955-1.166-.392-2.753-.588-4.764-.588H90.75v19.724h4.142c2.028 0 3.595-.183 4.7-.55 1.182-.365 2.312-1.017 3.391-1.954 2.15-1.873 3.224-4.325 3.224-7.357 0-3.024-1.03-5.463-3.094-7.32M110.001 21.065h11.03v-2.797h-8.014v-6.592h7.78V8.878h-7.78V4.14h8.014V1.341h-11.03zM126.52 4.574c-1.684 1.966-2.526 4.206-2.526 6.72 0 2.8 1.006 5.194 3.017 7.177 2.02 1.968 4.458 2.951 7.314 2.951 1.9 0 3.711-.48 5.437-1.442v-3.59c-.49.409-.96.758-1.404 1.047-.445.29-.873.52-1.288.69-.743.34-1.644.512-2.706.512-2.054 0-3.789-.712-5.205-2.133-1.415-1.424-2.122-3.17-2.122-5.24 0-2.094.707-3.864 2.122-5.313 1.407-1.457 3.138-2.184 5.192-2.184 1.865 0 3.668.72 5.411 2.159V2.402c-1.674-.963-3.408-1.444-5.204-1.444-3.288 0-5.967 1.205-8.039 3.615M149.912 10.27l9.037-8.928h-4.027l-7.78 7.869V1.34h-3.016v19.724h3.016v-8.163l.62-.613 7.199 8.776H159z"
                fill="#000" data-v-ddc5174c=""></path>
              <g class="logo-arrow" fill="#F7403A" data-v-ddc5174c="">
                <path
                  d="M0 21.065h13.404l2.501-3.945H2.501zM15.905 5.286L13.404 1.34H0l2.501 3.945zM18.406 9.23H5.002l1.25 1.973-1.25 1.973h13.404l1.25-1.973z"
                  data-v-ddc5174c=""></path>
              </g>
            </g>
          </svg></span></a> <a role="button" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample"
        class="navbar-burger burger"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span
          aria-hidden="true"></span></a></div>
    <div class="navbar-menu">
      <div class="navbar-start">
      </div>
      <div class="navbar-end">
        <div class="navbar-item">
        <form role="search"  action="/search/">
          <div class="field has-addons">
            <div class="control">
              <input class="input" type="text" placeholder="Keyword">
            </div>
            <div class="control">
              <button type="submit" class="button red-button">
                Search
              </button>
            </div>
          </div>
        </form>
        </div>
      </div>
    </div>
  </div>
</nav>
<div class="container">
    <nav class="breadcrumb" aria-label="breadcrumbs">
        <div class="columns">
            <div class="column is-two-thirds">
            <ul>
                
                    
                        <li><a href="../index.html">Rundeck Documentation (3.1.x)</a></li>
                    
                
                <li ><a href="index.html">Plugin Developer Guide</a></li>
                <li class="active"><a href="workflow-step-plugin.html">Workflow Step Plugin</a></li>
            </ul>
            </div>
            <div class="column">
            <ul>
                <li class="previous"><a href="resource-model-source-plugin.html"><i class="fas fa-arrow-left"></i>Resource Model Source Plugin</a></li>
                <li class="next"><a href="file-copier-plugin.html">File Copier Plugin <i class="fas fa-arrow-right"></i></a></li>
            </ul>
            </div>
        </div>
    </nav>
    <div class="breadcrumb-footer">
        <a class="btn btn-link top" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+developer/03-step-plugins.md&template=documentation-bug.md"> <i class="fas fa-flag"></i> Report a problem </a>
        <a class="btn btn-link top btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/developer/03-step-plugins.md"><i class="fas fa-pencil-alt"></i> Edit this page</a>
    </div>
</div>
<div id="docbody">
<div class="container">
<div class="columns">
<div class="column is-one-quarter toc-nav">
<section class="section sticky-toc">
<div class="nav">
<ul>
<li><a href="#about">About</a><ul>
<li><a href="#use-cases">Use cases</a></li>
</ul></li>
<li><a href="#java-plugin-type">Java Plugin Type</a></li>
<li><a href="#define-a-plugin-provider-class">Define a plugin provider class</a></li>
<li><a href="#workflow-step-types">Workflow Step Types</a><ul>
<li><a href="#plugin-properties">Plugin properties</a></li>
<li><a href="#workflowstep-plugin">WorkflowStep Plugin</a></li>
<li><a href="#workflownodestep-plugin">WorkflowNodeStep Plugin</a></li>
<li><a href="#remotescriptnodestep-plugin">RemoteScriptNodeStep Plugin</a></li>
<li><a href="#step-context-information">Step context information</a></li>
<li><a href="#example-code">Example code</a></li>
</ul></li>
<li><a href="#script-plugin-type">Script Plugin Type</a></li>
</ul>
</div>
</div>
</section>
<div class="column">
<section class="section content">
<div class="page-header">
<h1 class="title">Workflow Step Plugin</h1>
</div>
<h2 id="about">About</h2>
<p>There are two types of steps in a workflow:</p>
<ol type="1">
<li><strong>Node Steps</strong> - executed on multiple nodes
<ul>
<li>example: a command or script execution</li>
</ul></li>
<li><strong>Workflow Steps</strong> - only executes once in a workflow
<ul>
<li>example: a Job-Reference step</li>
</ul></li>
</ol>
<p>When there are multiple Nodes to execute on, the Node Steps execute multiple times, although the Workflow Steps will execute only once. Workflow steps are always executed in order, so any sequence of steps will be completed before the next step is executed even if they run on multiple nodes or threads.</p>
<p>You can create a plugin to execute either type of step.</p>
<h3 id="use-cases">Use cases</h3>
<p>There are several reasons to create a Step Plugin:</p>
<ul>
<li>You want to take the set of nodes defined for a Job, and use them with some other batch processing system, such as another kind of remote dispatcher or orchestration tool, rather than executing commands on them directly.
<ul>
<li>You would implement a <a href="#workflowstep-plugin">WorkflowStep Plugin</a> plugin which is provided with the set of Nodes</li>
</ul></li>
<li>You want to interact with another system on a per-node basis, such as for updating or reporting the state of a Node or process, rather than executing a command on the node
<ul>
<li>You would implement a <a href="#workflownodestep-plugin">WorkflowNodeStep Plugin</a></li>
</ul></li>
<li>You want to wrap a command or script in a simplified user interface and have it executed remotely on nodes
<ul>
<li>You would implement a <a href="#remotescriptnodestep-plugin">RemoteScriptNodeStep Plugin</a> which allows you to define a command or script and declare a custom set of input fields.</li>
</ul></li>
</ul>
<h2 id="java-plugin-type">Java Plugin Type</h2>
<h2 id="define-a-plugin-provider-class">Define a plugin provider class</h2>
<p>Refer to the <a href="plugin-development.html#java-plugin-development" title="Plugin Developer Guide - Plugin Development - Java Plugin Development">Plugin Development - Java Plugins</a> section for information about correct definition of a <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/core/plugins/Plugin.html">Plugin</a> class, including packaging as a Jar and annotation.</p>
<p>Be sure to use the <code>@Plugin</code> annotation on your provider implementation class to let it be recognized by Rundeck (See <a href="plugin-annotations.html" title="Plugin Developer Guide - Plugin Annotations">Plugin Annotations</a>).</p>
<p>Your <code>service</code> name should be one of the three listed below. The class <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/plugins/ServiceNameConstants.html">ServiceNameConstants</a> contains static definitions of all Rundeck Service names.</p>
<h2 id="workflow-step-types">Workflow Step Types</h2>
<p>Your plugins can be one of three types.</p>
<ul>
<li><a href="#workflowstep-plugin">WorkflowStep</a></li>
<li><a href="#workflownodestep-plugin">WorkflowNodeStep</a></li>
<li><a href="#remotescriptnodestep-plugin">RemoteScriptNodeStep</a></li>
</ul>
<p>Each plugin type has an associated Java interface.</p>
<h3 id="plugin-properties">Plugin properties</h3>
<p>See <a href="plugin-development.html#plugin-descriptions" title="Plugin Developer Guide - Plugin Development - Plugin Descriptions">Plugin Development - Java Plugins - Descriptions</a> to learn how to create configuration properties for your plugin using Java annotations.</p>
<h3 id="workflowstep-plugin">WorkflowStep Plugin</h3>
<p>Annotate your class with <code>@Plugin</code> and use the service name <code>WorkflowStep</code>.</p>
<p>Implement the interface <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/plugins/step/StepPlugin.html">StepPlugin</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">  <span class="co">*</span> Execute the step<span class="co">.</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">  <span class="co">*</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  <span class="co">*</span> <span class="kw">@param context </span>      the plugin step context</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  <span class="co">*</span> <span class="kw">@param configuration </span>Any configuration property values not otherwise applied to the plugin</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  <span class="co">*</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  <span class="co">*</span> <span class="kw">@throws StepException </span>if an error occurs<span class="co">,</span> the failureReason should indicate the reason</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">  <span class="co">*/</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="kw">public</span> <span class="dt">void</span> <span class="fu">executeStep</span>(<span class="dt">final</span> PluginStepContext context, <span class="dt">final</span> <span class="bu">Map</span>&lt;<span class="bu">String</span>, <span class="bu">Object</span>&gt; configuration)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    <span class="kw">throws</span> StepException;</a></code></pre></div>
<p>Your implementation should throw a <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/core/execution/workflow/steps/node/NodeStepException.html">StepException</a> if an error occurs.</p>
<h3 id="workflownodestep-plugin">WorkflowNodeStep Plugin</h3>
<p>Annotate your class with <code>@Plugin</code> and use the service name <code>WorkflowNodeStep</code>.</p>
<p>Implement the interface <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/plugins/step/NodeStepPlugin.html">NodeStepPlugin</a>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"> <span class="co">*</span> Execute the plugin step logic for the given node<span class="co">.</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"> <span class="co">*</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"> <span class="co">*</span> <span class="kw">@param context </span>      the step context</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"> <span class="co">*</span> <span class="kw">@param configuration </span>Any configuration property values not otherwise applied to the plugin</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"> <span class="co">*</span> <span class="kw">@param entry </span>        the Node</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"> <span class="co">*</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"> <span class="co">*</span> <span class="kw">@throws NodeStepException </span>if an error occurs</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="kw">public</span> <span class="dt">void</span> <span class="fu">executeNodeStep</span>(<span class="dt">final</span> PluginStepContext context,</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">                               <span class="dt">final</span> <span class="bu">Map</span>&lt;<span class="bu">String</span>, <span class="bu">Object</span>&gt; configuration,</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">                               <span class="dt">final</span> INodeEntry entry)</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">    <span class="kw">throws</span> NodeStepException;</a></code></pre></div>
<p>Your implementation should throw a <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/core/execution/workflow/steps/node/NodeStepException.html">StepException</a> if an error occurs.</p>
<h3 id="remotescriptnodestep-plugin">RemoteScriptNodeStep Plugin</h3>
<p>These are a specialized use-case of the Node Step plugin. They allow you to simply define a command or a script that should be executed on the remote nodes, and Rundeck will handle the remote execution of the command/script via the appropriate services.</p>
<p>Annotate your class with <code>@Plugin</code> and use the service name <code>RemoteScriptNodeStep</code></p>
<p>Implement the interface <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/plugins/step/RemoteScriptNodeStepPlugin.html">RemoteScriptNodeStepPlugin</a>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"> <span class="co">*</span> Generate a full script or command string to execute on the remote node</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"> <span class="co">*</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"> <span class="co">* </span><span class="kw">@param context </span>      the step context</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"> <span class="co">*</span> <span class="kw">@param configuration </span>Any configuration property values not otherwise applied to the plugin</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"> <span class="co">*</span> <span class="kw">@param entry </span>        the Node</a>
<a class="sourceLine" id="cb3-7" data-line-number="7"> <span class="co">*</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"> <span class="co">*</span> <span class="kw">@throws NodeStepException </span>if an error occurs</a>
<a class="sourceLine" id="cb3-9" data-line-number="9"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="kw">public</span> GeneratedScript <span class="fu">generateScript</span>(<span class="dt">final</span> PluginStepContext context,</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">                                      <span class="dt">final</span> <span class="bu">Map</span>&lt;<span class="bu">String</span>, <span class="bu">Object</span>&gt; configuration,</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">                                      <span class="dt">final</span> INodeEntry entry)</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">    <span class="kw">throws</span> NodeStepException;</a></code></pre></div>
<p>Your implementation should return a <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/plugins/step/GeneratedScript.html">GeneratedScript</a> object. You can make use of the <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/plugins/step/GeneratedScriptBuilder.html">GeneratedScriptBuilder</a> class to generate the appropriate return type using these two factory methods:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">/**</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"> <span class="co">*</span> Create a script</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"> <span class="co">*</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"> <span class="co">* </span><span class="kw">@param script </span>the script text</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"> <span class="co">*</span> <span class="kw">@param args </span>  the arguments for the script</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="kw">public</span> <span class="dt">static</span> GeneratedScript <span class="fu">script</span>(<span class="dt">final</span> <span class="bu">String</span> script, <span class="dt">final</span> <span class="bu">String</span>[] args);</a>
<a class="sourceLine" id="cb4-8" data-line-number="8"> </a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">/**</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"> <span class="co">*</span> Create a command</a>
<a class="sourceLine" id="cb4-11" data-line-number="11"> <span class="co">*</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"> <span class="co">* </span><span class="kw">@param command </span>the command and arguments</a>
<a class="sourceLine" id="cb4-13" data-line-number="13"> <span class="co">*/</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="kw">public</span> <span class="dt">static</span> GeneratedScript <span class="fu">command</span>(<span class="dt">final</span> <span class="bu">String</span><span class="kw">... </span>command);</a></code></pre></div>
<h3 id="step-context-information">Step context information</h3>
<p>Each plugin is passed a <a href="https://javadoc.io/page/org.rundeck/rundeck-core/3.1.x-20190512/com/dtolabs/rundeck/plugins/step/PluginStepContext.html">PluginStepContext</a> instance that provides access to details about the step and its configuration:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode java"><code class="sourceCode java"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">public</span> <span class="kw">interface</span> PluginStepContext {</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">    <span class="co">/**</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">     <span class="co">*</span> Return the logger</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">     <span class="co">*/</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="kw">public</span> PluginLogger <span class="fu">getLogger</span>();</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">    <span class="co">/**</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">     <span class="co">*</span> Return the project name</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">     <span class="co">*/</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getFrameworkProject</span>();</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">    <span class="co">/**</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">     <span class="co">*</span> Return the data context</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">     <span class="co">*/</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13">    <span class="kw">public</span> <span class="bu">Map</span>&lt;<span class="bu">String</span>, <span class="bu">Map</span>&lt;<span class="bu">String</span>, <span class="bu">String</span>&gt;&gt; <span class="fu">getDataContext</span>();</a>
<a class="sourceLine" id="cb5-14" data-line-number="14"> </a>
<a class="sourceLine" id="cb5-15" data-line-number="15">    <span class="co">/**</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16">     <span class="co">*</span> Return the nodes used for this execution</a>
<a class="sourceLine" id="cb5-17" data-line-number="17">     <span class="co">*/</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18">    <span class="kw">public</span> INodeSet <span class="fu">getNodes</span>();</a>
<a class="sourceLine" id="cb5-19" data-line-number="19">    <span class="co">/**</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20">     <span class="co">*</span> Return the step number within the current workflow</a>
<a class="sourceLine" id="cb5-21" data-line-number="21">     <span class="co">*/</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22">    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">getStepNumber</span>();</a>
<a class="sourceLine" id="cb5-23" data-line-number="23">    <span class="co">/**</span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24">     <span class="co">*</span> Return the context path of step numbers within the larger workflow context<span class="co">.</span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25">     <span class="co">*/</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26">    <span class="kw">public</span> <span class="bu">List</span>&lt;<span class="bu">Integer</span>&gt; <span class="fu">getStepContext</span>();</a>
<a class="sourceLine" id="cb5-27" data-line-number="27">}</a></code></pre></div>
<h3 id="example-code">Example code</h3>
<p>See the source directory <code>examples/example-java-step-plugin</code> for examples of all three provider types.</p>
<ul>
<li>On github: <a href="https://github.com/rundeck/rundeck/tree/development/examples/example-java-step-plugin">example-java-step-plugin</a></li>
</ul>
<h2 id="script-plugin-type">Script Plugin Type</h2>
<p><em>Note:</em> Currently these type of plugins can be implemented as script-based plugins:</p>
<ul>
<li>Node Steps - the plugin will execute the script <em>locally</em> on the Rundeck server for each node</li>
<li>Remote Script Node Steps - the plugin will execute the script <em>remotely</em> on each node</li>
</ul>
<p>See the <a href="plugin-development.html#script-plugin-development" title="Plugin Developer Guide - Plugin Development - Script Plugin Development">Script Plugin Development</a> for the basics of developing script-based plugins for Rundeck.</p>
<p>Use the service name for the plugin type:</p>
<ul>
<li><code>WorkflowNodeStep</code></li>
<li><code>RemoteScriptNodeStep</code></li>
</ul>
<p>For configuration properties, see the <a href="model-format-parser-and-generator-plugin.html" title="Plugin Developer Guide - Model Format Parser and Generator Plugin">Resource Model Source Plugin - Plugin Properties</a>.</p>
<p>Two additional <a href="plugin-development.html#provider-metadata" title="Plugin Developer Guide - Plugin Development - Provider Metadata">provider metadata properties</a> are available for <code>RemoteScriptNodeStep</code> plugins:</p>
<ul>
<li><code>use-original-extension</code> - (<code>true/false</code>, default <code>true</code>), whether to force the remotely copied script to have the same file extension as the original specified by <code>script-file</code>.</li>
<li><code>script-file-extension</code> - A file extension to use for the remotely copied script.</li>
</ul>
<p>To define <a href="plugin-annotations.html#property-scopes" title="Plugin Developer Guide - Plugin Annotations - Property Scopes">property scopes</a>, add a <code>scope</code> entry in the map for a configuration property:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb6-1" data-line-number="1">  <span class="fu">config:</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">    <span class="kw">-</span> <span class="fu">type:</span><span class="at"> Integer</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">      <span class="fu">name:</span><span class="at"> count</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">      <span class="fu">title:</span><span class="at"> Count</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">      <span class="fu">description:</span><span class="at"> Enter the number of nodes to generate</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">      <span class="fu">scope:</span><span class="at"> Project</span></a></code></pre></div>
</section>
</div>
</div>
</div>
</div>
<div class="container">
    <nav class="breadcrumb" aria-label="breadcrumbs">
        <div class="columns">
            <div class="column is-two-thirds">
            <ul>
                
                    
                        <li><a href="../index.html">Rundeck Documentation (3.1.x)</a></li>
                    
                
                <li ><a href="index.html">Plugin Developer Guide</a></li>
                <li class="active"><a href="workflow-step-plugin.html">Workflow Step Plugin</a></li>
            </ul>
            </div>
            <div class="column">
            <ul>
                <li class="previous"><a href="resource-model-source-plugin.html"><i class="fas fa-arrow-left"></i>Resource Model Source Plugin</a></li>
                <li class="next"><a href="file-copier-plugin.html">File Copier Plugin <i class="fas fa-arrow-right"></i></a></li>
            </ul>
            </div>
        </div>
    </nav>
    <div class="breadcrumb-footer">
        <a class="btn btn-link bottom" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+developer/03-step-plugins.md&template=documentation-bug.md"> <i class="fas fa-flag"></i> Report a problem </a>
        <a class="btn btn-link bottom btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/developer/03-step-plugins.md"><i class="fas fa-pencil-alt"></i> Edit this page</a>
    </div>
</div>
<footer class="brand-footer">
  <div class="container">
    <div class="columns" style="margin-bottom:0;padding-top:5em;padding-bottom:5em">
      <div class="column is-1" style="padding-top:1.3em"><span><svg width="39" height="40" viewBox="0 0 39 40"
            xmlns="http://www.w3.org/2000/svg">
            <g fill="#F7403A" fill-rule="evenodd">
              <path
                d="M0 39.175h26.17l4.883-7.702H4.883zM31.053 8.368L26.17.665H0l4.883 7.703zM35.936 16.07H9.766l2.44 3.85-2.44 3.851h26.17l2.44-3.852z">
              </path>
            </g>
          </svg></span></div>
      <div class="column is-4">
        <div class="contact"><a href="tel:8336774376" class="phone is-size-3 has-text-weight-bold">(833) OPS-HERO</a>
          <div class="address address has-text-weight-bold is-size-5" style="margin-top:1em">2317
            Broadway, Suite 130
            <br>Redwood City, CA 94063
          </div>
          <div>
            <ul class="social-links">
              <li class="social-link"><a href="https://www.linkedin.com/company/17928739" role="menuitem"
                  target="_blank" aria-label="Linkedin" class="button social-link__icon"><svg aria-hidden="true"
                    focusable="false" data-prefix="fab" data-icon="linkedin" role="img"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                    class="svg-inline--fa fa-linkedin fa-w-14">
                    <path fill="currentColor"
                      d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"
                      class=""></path>
                  </svg></a></li>
              <li class="social-link"><a href="https://twitter.com/rundeck" role="menuitem" target="_blank"
                  aria-label="Twitter" class="button social-link__icon"><svg aria-hidden="true" focusable="false"
                    data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16">
                    <path fill="currentColor"
                      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"
                      class=""></path>
                  </svg></a></li>
            </ul>
          </div>
          <div class="copyright">
            <span class="copyright-text" style="font-weight:500;font-size:14px">©2019 Rundeck.
              All Rights Reserved.</span> 
              <br />
              <span class="generated-date" title="2019-06-18T18:00:35UTC">2019-06-18T18:00:35UTC</span>
          </div>
        </div>
      </div>
      <div class="column">
        <ul class="marketing-site-nav is-size-5 has-text-weight-semibold">
          <li><a href="https://www.rundeck.com/about" role="menuitem">About</a>
          </li>
          <li><a href="https://www.rundeck.com/about/team" role="menuitem">Team</a></li>
          <li><a href="https://www.rundeck.com/careers" role="menuitem">Careers</a></li>
          <li><a href="https://www.rundeck.com/news" role="menuitem">News</a>
          </li>
          <li><a href="https://www.rundeck.com/events" role="menuitem">Events</a>
          </li>
          <li><a href="https://www.rundeck.com/privacy-policy" role="menuitem">Privacy Policy</a></li>
          <li><a href="https://www.rundeck.com/terms" role="menuitem">Terms of
              Use</a></li>
          <li><a href="https://www.rundeck.com/contact" role="menuitem">Contact</a></li>
          <li><a href="https://www.rundeck.com/demo" role="menuitem">Request a
              Demo</a></li>
        </ul>
      </div>
    </div>
    <div class="creative-commons">
      <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Rundeck Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://rundeck.com" property="cc:attributionName" rel="cc:attributionURL">Rundeck, Inc</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License. </a>
    </div>
  </div>
</footer>

<script type="text/javascript">
   var _gaq = [['_setAccount', 'UA-529275-13'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>

<script>window.markdeepOptions={mode:'html'};</script>
<!-- Markdeep: --><script src="../markdeep.min.js"></script>
<!-- <script src="https://casual-effects.com/markdeep/latest/markdeep.min.js"></script> -->

<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/2768099.js"></script>
<!-- End of HubSpot Embed Code -->
<div class='scrolltop'>
<div class='scrollitem icon'>
<i class="fas fa-chevron-up" ></i>
</div>
</div>
</body>
</html>
