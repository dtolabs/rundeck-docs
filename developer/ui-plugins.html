<!DOCTYPE html>
<html>
<head>
  <title>UI Plugins</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Greg Schueler" />
  <meta name="date" content="December 4, 2017" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(function(){
  jQuery('table').addClass('table table-condensed table-responsive'); 
  jQuery('[data-toggle="popover"]').popover();
});
</script>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../style.css" type="text/css" />
</head>
<body data-spy="scroll" data-target=".toc-nav">
<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="container-fluid">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="https://www.rundeck.com/open-source">
      Rundeck
      <p class="small rd_version">‚Üê Return to Rundeck Project</p>
    </a>
  </div>
  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <form class="navbar-form navbar-right" role="search"  action="http://rundeck.org/search/">
      <div class="form-group">
        <input type="text" class="form-control" name="q" placeholder="Search">
      </div>
      <button type="submit" class="btn btn-default">Submit</button>
    </form>
  </div>
  </div>
</nav>

<div class="container top breadcrumb_holder">
<div class="row">
<div class="col-sm-6">
<ol class="breadcrumb top">

    
        <li><a href="../index.html">Rundeck Documentation (2.11.8)</a></li>
    
    
    <li ><a href="index.html">Plugin Developer Guide</a></li>
    <li class="active"><a href="ui-plugins.html">UI Plugins</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="scm-plugins.html"><i class="glyphicon glyphicon-arrow-left"></i> SCM Plugins</a></li>
      <li class="next"><a href="log-filter-plugins.html">Log Filter Plugins <i class="glyphicon glyphicon-arrow-right"></i></a></li>
    </ul>
</div>
</div>
</div>
<div id="docbody">
<div class="container">
<div class="row">
<div class="col-sm-3 toc-nav">
<div class="nav">
<ul>
<li><a href="#about">About</a></li>
<li><a href="#behavior">Behavior</a></li>
<li><a href="#zip-plugin-type">Zip Plugin Type</a><ul>
<li><a href="#ui-plugin-provider-declaration">UI Plugin Provider Declaration</a></li>
<li><a href="#localization">Localization</a></li>
<li><a href="#icon">Icon</a></li>
</ul></li>
<li><a href="#java-plugin-type">Java Plugin Type</a><ul>
<li><a href="#localization-1">Localization</a></li>
<li><a href="#icon-1">Icon</a></li>
</ul></li>
<li><a href="#javascript-api">Javascript API</a><ul>
<li><a href="#loading-resources">Loading resources</a></li>
<li><a href="#loading-i18n-resources">Loading i18n Resources</a></li>
</ul></li>
<li><a href="#example-plugin">Example Plugin</a></li>
</ul>
</div>
</div>
<div class="col-sm-9">
<div class="page-header">
<h1 class="title">UI Plugins</h1>
</div>
<h2 id="about"><a href="#about">About</a></h2>
<p>UI Plugins provide a way to include Javascript and CSS files in various parts of the Rundeck GUI's HTML pages. You can define which pages of the GUI should include your plugin files, and use the Javascript and CSS to modify or add new features to the GUI.</p>
<p>UI Plugins that are installed are loaded on all applicable pages by default.</p>
<p>UI Plugins can either be packaged as Zip files or Java Jar files. The simplest is to use a Zip plugin type.</p>
<p>Your Javascript can make use if a simple <a href="#javascript-api">Javascript API</a> for additional features.</p>
<h2 id="behavior"><a href="#behavior">Behavior</a></h2>
<p>When Rundeck renders a page, it evaluates whether any UI plugins are applicable, and what resources of those plugins to load for the page. If some plugins declare that they <code>require</code> other plugins, the ordering is arranged to load required plugins first, if possible. Note: any plugin that you put in the <code>requires</code> section must also be configured to load on the same pages, otherwise Rundeck will not load it.</p>
<p>For Zip UI plugins Rundeck looks at the <code>plugin.yaml</code> data which declares the page configurations to determine applicability. For Java plugins, Rundeck calls the <code>doesApply</code> method.</p>
<p>When loading a plugin for the page, Rundeck will link to the script and stylesheets for the page. For Zip UI Plugins, the Page configuration determines which scripts and stylesheets to load. For Java plugins, the <code>scriptResourcesForPath</code> and <code>styleResourcesForPath</code> methods will be called.</p>
<p>This is the list of available pages which can load UI plugins:</p>
<ul>
<li><code>menu/jobs</code>,</li>
<li><code>menu/home</code></li>
<li><code>menu/projectHome</code></li>
<li><code>menu/executionMode</code></li>
<li><code>menu/projectExport</code></li>
<li><code>menu/projectImport</code></li>
<li><code>menu/projectDelete</code></li>
<li><code>menu/projectAcls</code></li>
<li><code>menu/editProjectAclFile</code></li>
<li><code>menu/createProjectAclFile</code></li>
<li><code>menu/saveProjectAclFile</code></li>
<li><code>menu/logStorage</code></li>
<li><code>menu/securityConfig</code></li>
<li><code>menu/acls</code></li>
<li><code>menu/editSystemAclFile</code></li>
<li><code>menu/createSystemAclFile</code></li>
<li><code>menu/saveSystemAclFile</code></li>
<li><code>menu/systemInfo</code></li>
<li><code>menu/systemConfig</code></li>
<li><code>menu/metrics</code></li>
<li><code>menu/plugins</code></li>
<li><code>menu/welcome</code></li>
<li><code>menu/storage</code></li>
<li><code>scheduledExecution/show</code></li>
<li><code>scheduledExecution/edit</code></li>
<li><code>scheduledExecution/delete</code></li>
<li><code>scheduledExecution/create</code></li>
<li><code>execution/show</code></li>
<li><code>framework/nodes</code></li>
<li><code>framework/adhoc</code></li>
<li><code>framework/createProject</code></li>
<li><code>framework/editProject</code></li>
<li><code>framework/editProjectConfig</code></li>
<li><code>framework/editProjectFile</code></li>
<li><code>scm/index</code></li>
<li><code>reports/index</code></li>
</ul>
<h2 id="zip-plugin-type"><a href="#zip-plugin-type">Zip Plugin Type</a></h2>
<p>See the <a href="plugin-development.html#script-plugin-zip-structure">Plugin Development - Script plugin zip structure</a> for the basics of Zip plugin structure.</p>
<p>The structure of the zip file is:</p>
<pre><code>[name]-plugin.zip
\- [name]-plugin/ -- root directory of zip contents, same name as zip file
   |- plugin.yaml -- plugin metadata file
   \- resources/  -- i18n resources, icons, (and for UI plugins: scripts/css)
      |- icon.png
      |- i18n/
      |  |- messages.properties
      |  |- messages_es_419.properties
      |  \- ...
      |- js/
      |  |- myfile.js
      |  \- ...
      \- css/
         |- mystyles.css
         \- ...</code></pre>
<h3 id="ui-plugin-provider-declaration"><a href="#ui-plugin-provider-declaration">UI Plugin Provider Declaration</a></h3>
<p>The following is required in the <code>providers:</code> section of the <code>plugin.yaml</code>:</p>
<pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># yaml plugin metadata</span>

<span class="fu">name:</span> plugin name
<span class="fu">version:</span> plugin version
<span class="fu">rundeckPluginVersion:</span> 1.2
<span class="fu">author:</span> author name
<span class="fu">date:</span> release date (ISO8601)
<span class="fu">url:</span> website URL
<span class="fu">providers:</span>
    <span class="kw">-</span> <span class="fu">service:</span> UI
      <span class="fu">name:</span> my-provider-id
      <span class="fu">plugin-type:</span> ui
      <span class="fu">title:</span> &quot;My Plugin Title&quot;
      <span class="fu">description:</span> &quot;My Plugin Description&quot;
      <span class="fu">ui:</span>
        <span class="kw">-</span> <span class="fu">pages:</span> &#39;*&#39;
          <span class="fu">scripts:</span>
            <span class="kw">-</span> js/my-init.js
            <span class="kw">-</span> js/lib/some-dependency.js
            <span class="kw">-</span> js/lib/my-main.js
          <span class="fu">requires:</span> &#39;some-other-provider&#39;
        <span class="kw">-</span> <span class="fu">pages:</span> <span class="kw">[</span>&#39;some/path&#39;<span class="kw">]</span>
          <span class="fu">styles:</span> 
            <span class="kw">-</span> css/mystyles.css</code></pre>
<p>For a UI plugin, define a <code>service: UI</code> and a <code>plugin-type: ui</code>. (The <code>providers</code> section can also define other providers, of any type.)</p>
<p>For <code>name:</code> use a unique provider ID for your plugin.</p>
<p>Within the <code>ui:</code> section is a list of UI Plugin Page Configurations.</p>
<p>UI Plugin Page Configurations consist of:</p>
<ul>
<li><code>pages:</code> A list of applicable Page paths. This can be a single path string, a list of paths, or a <code>*</code> which will match all paths.</li>
<li><code>scripts:</code> A single file or list of files. These are relative to the <code>resources</code> directory in your zip file.</li>
<li><code>styles:</code> A single file, or a list of files. Thes are relative to the <code>resources</code> directory in your zip file.</li>
<li><code>requires:</code> A single or list of other UI plugin provider IDs.</li>
</ul>
<p>See <a href="#javascript-api">Javascript API</a> for additional Javascript information.</p>
<h3 id="localization"><a href="#localization">Localization</a></h3>
<p>For the basics of zip plugin localization see: <a href="plugin-development.html#internationalizationlocalization-for-zip-files">Plugin Development - Internationalization/Localization for Zip files</a>.</p>
<h3 id="icon"><a href="#icon">Icon</a></h3>
<p>See <a href="plugin-development.html#plugin-icons">Plugin Icons</a>.</p>
<h2 id="java-plugin-type"><a href="#java-plugin-type">Java Plugin Type</a></h2>
<ul>
<li><em>Note</em>: Refer to <a href="plugin-development.html#java-plugin-development">Java Development</a> for information about developing a Java plugin for Rundeck.</li>
</ul>
<p>The plugin interface is <a href="../javadoc/com/dtolabs/rundeck/plugins/rundeck/UIPlugin.html">UIPlugin</a>.</p>
<pre class="sourceCode java"><code class="sourceCode java">
<span class="kw">public</span> <span class="kw">interface</span> UIPlugin {
    <span class="co">/**</span>
<span class="co">     * </span><span class="kw">@param path</span>
<span class="co">     *</span>
<span class="co">     * </span><span class="kw">@return </span><span class="co">true if this plugin applies at the path</span>
<span class="co">     */</span>
    <span class="dt">boolean</span> <span class="fu">doesApply</span>(String path);

    <span class="co">/**</span>
<span class="co">     *</span>
<span class="co">     * </span><span class="kw">@param path</span>
<span class="co">     * </span><span class="kw">@return </span><span class="co">list of resources available at the path</span>
<span class="co">     */</span>
    List&lt;String&gt; <span class="fu">resourcesForPath</span>(String path);

    <span class="co">/**</span>
<span class="co">     * </span><span class="kw">@param path</span>
<span class="co">     *</span>
<span class="co">     * </span><span class="kw">@return </span><span class="co">list of javascript resources to load at the path</span>
<span class="co">     */</span>
    List&lt;String&gt; <span class="fu">scriptResourcesForPath</span>(String path);

    <span class="co">/**</span>
<span class="co">     * </span><span class="kw">@param path</span>
<span class="co">     *</span>
<span class="co">     * </span><span class="kw">@return </span><span class="co">list of css stylesheets to load at the path</span>
<span class="co">     */</span>
    List&lt;String&gt; <span class="fu">styleResourcesForPath</span>(String path);

    <span class="co">/**</span>
<span class="co">     * </span><span class="kw">@param path</span>
<span class="co">     *</span>
<span class="co">     * </span><span class="kw">@return </span><span class="co">list of plugin names this plugin depends on for the specified path</span>
<span class="co">     */</span>
    List&lt;String&gt; <span class="fu">requires</span>(String path);
}</code></pre>
<p>The methods of the plugin are used as follows:</p>
<ul>
<li><code>doesApply</code>: should return <code>true</code>, if the plugin applies to the given path</li>
<li><code>resourcesForPath</code>: return the list of resources for the given path</li>
<li><code>scriptResourcesForPath</code>: return the list of Javascript resources for the path</li>
<li><code>styleResourcesForPath</code>: return the list of CSS resources for the path</li>
<li><code>requires</code>: return a list of other UI plugin names which this plugin requires, used to order the loading of plugin resources.</li>
</ul>
<p>Resources should be included in your plugin Jar file under a <code>resources/</code> directory.</p>
<h3 id="localization-1"><a href="#localization-1">Localization</a></h3>
<p>For the basics of Java plugin localization see: <a href="plugin-development.html#plugin-localization">Plugin Development - Plugin Localization</a>.</p>
<h3 id="icon-1"><a href="#icon-1">Icon</a></h3>
<p>See <a href="plugin-development.html#plugin-icons">Plugin Icons</a>.</p>
<h2 id="javascript-api"><a href="#javascript-api">Javascript API</a></h2>
<p>When loaded in a Rundeck GUI page, your Javascript code can use a simple Javascript API to get more information about the Rundeck application, and your plugin.</p>
<p>Note: Rundeck makes use of <a href="http://knockoutjs.com/">Knockout</a> and [jQuery][] on all GUI pages, so they can be used by your plugins. Knockout is useful to understand when interacting with the JS already included on a Rundeck page.</p>
<p>Rundeck creates a window object called <code>rundeckPage</code> with these methods:</p>
<ul>
<li><code>project()</code>: returns the name of the current project, if available</li>
<li><code>path()</code>: the page path</li>
<li><code>lang()</code>: current user locale and language code</li>
<li><code>pluginBaseUrl(pluginId)</code>: returns the base URL for loading file resources for a plugin with provider ID &quot;pluginId&quot;. Append a resources path to retrieve any plugin resource files.</li>
<li><code>pluginBasei18nUrl(pluginId)</code>: returns the base URL for loading i18n resources for a plugin with provider ID &quot;pluginId&quot;. Append a resources path to retrieve i18n resources.</li>
</ul>
<p>Note: the <code>rundeckPage</code> object may have other methods, but any methods not documented here are subject to change.</p>
<h3 id="loading-resources"><a href="#loading-resources">Loading resources</a></h3>
<p>You can load other resources from your plugin by using the <code>pluginBaseUrl</code> for your plugin.</p>
<p>Example using jQuery:</p>
<pre class="js"><code>function loadHtmlTemplate(file){
    //assuming my zip plugin has a resources/html/myfile.html
    var myProvider=&#39;com.mycompany.rundeck.myplugin&#39;;
    var pluginUrl = rundeckPage.pluginBaseUrl(myProvider);
    var fullUrl = pluginUrl + &#39;/html/&#39; + file + &quot;.html&quot;;
    jQuery.get(fullUrl, function (text) {
        //do something with the HTML contents         
    });
}</code></pre>
<h3 id="loading-i18n-resources"><a href="#loading-i18n-resources">Loading i18n Resources</a></h3>
<p>The <code>rundeckPage.pluginBasei18nUrl(..)</code> method will return the base URL for loading i18n resources.</p>
<p>Rundeck Plugin Localization/Internationalization uses java <code>.properties</code> formatted files. (See <a href="plugin-development.html#plugin-localization">Plugin Localization</a>). However, your i18n resources don't have to be <code>.properties</code> files.</p>
<p>Requesting resources via this URL provides two features to help with i18n:</p>
<ol style="list-style-type: decimal">
<li>Locale resolution. Requesting a path such as <code>rundeckPage.pluginBasei18nUrl('myprovider')+'/myfile.txt'</code>, will attempt to resolve the file by looking for a file based on the current User's locale/language settings. E.g. if their language is set to Spanish (code <code>es_419</code>), the request will resolve to a file <code>i18n/myfile_es_419.txt</code> if it exists. It will fall back to the language (e.g. <code>es</code>), then any default locale (e.g. <code>en_us</code>), default language (e.g. <code>en</code>) and finally the original file path.</li>
<li>Conversion of Java .properties to JSON. If you request a <code>.properties</code> file, and append a <code>?format=json</code> to the URL, Rundeck will load the Java Properties formatted data, and return the JSON for the data.</li>
</ol>
<p>Examples:</p>
<p>Loads plugin i18n messages into the <code>window.Messages</code> object. If my zip plugin has a file <code>resources/i18n/messages_es_419.properties</code> and user's current lang is <code>es_419</code>, this would load the Spanish messages:</p>
<pre class="js"><code>function loadi18nMessages(file){
    var myProvider=&#39;com.mycompany.rundeck.myplugin&#39;;
    var plugini18nBase = rundeckPage.pluginBasei18nUrl(myProvider);
    jQuery.ajax({
        url: plugini18nBase + &#39;/messages.properties?format=json&#39;,
        success: function (data) {
            if (typeof(window.Messages) != &#39;object&#39;) {
                window.Messages = {};
            }
            jQuery.extend(window.Messages, data);
        }
    });
}</code></pre>
<p>This example is similar to the first example, but loads a HTML file specific to the Language/Locale of the user. If the locale is <code>es_419</code> this would load the <code>resources/i18n/html/myfile_es_419.html</code> file:</p>
<pre class="js"><code>
function loadi18nHtmlTemplate(file){
    var myProvider=&#39;com.mycompany.rundeck.myplugin&#39;;
    var plugini18nBase = rundeckPage.pluginBasei18nUrl(myProvider);
    var fullUrl = plugini18nBase + &#39;/html/&#39; + file + &quot;.html&quot;;
    jQuery.get(fullUrl, function (text) {
        //do something with the HTML contents         
    });
}</code></pre>
<h2 id="example-plugin"><a href="#example-plugin">Example Plugin</a></h2>
<p>Here are some <a href="https://github.com/rundeck-plugins/ui-plugin-examples/">UI Plugin Examples</a>.</p>
</div>
</div>
</div>
</div>

<div class="container bottom breadcrumb_holder">
<div class="row">
<div class="col-sm-6">
<ol class="breadcrumb bottom">

    
        <li><a href="../index.html">Rundeck Documentation (2.11.8)</a></li>
    
    
    <li ><a href="index.html">Plugin Developer Guide</a></li>
    <li class="active"><a href="ui-plugins.html">UI Plugins</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="scm-plugins.html"><i class="glyphicon glyphicon-arrow-left"></i> SCM Plugins</a></li>
      <li class="next"><a href="log-filter-plugins.html">Log Filter Plugins <i class="glyphicon glyphicon-arrow-right"></i></a></li>
    </ul>
</div>
</div>
</div>
<div class='container footer'>

<div class="row">
	<footer class="copy col-sm-12 text-muted">

<p>
<a class="btn btn-info btn-try-rundeck-pro" href="http://rundeck.com/" data-toggle="popover" data-trigger="hover" 
data-content="<ul class=&quot;list-unstyled&quot;>
	<li><i class=&quot;glyphicon glyphicon-gift&quot;></i> Try Rundeck Pro for Free</li>
	<li><i class=&quot;glyphicon glyphicon-flash&quot;></i> Get Exclusive Features</li>
	<li><i class=&quot;glyphicon glyphicon-briefcase&quot;></i> Get Professional Support</li>
	<li><i class=&quot;glyphicon glyphicon-heart&quot;></i> Support Open-source Development</li>
	<li><i class=&quot;glyphicon glyphicon-thumbs-up&quot;></i> Get home by 5 </li>
</ul>" data-html="true">
<i class="glyphicon glyphicon-hand-right"></i>
Try Rundeck Pro
</a>
</p>

<span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Rundeck Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://simplifyops.com" property="cc:attributionName" rel="cc:attributionURL">Rundeck, Inc</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
<p>
&copy;2018 <a href="http://rundeck.com">Rundeck</a>
</p>
<p>
<span class="generated-date" title="2018-11-09T21:12:17UTC">2018-11-09T21:12:17UTC</span>
</p>
</footer>
</div>
</div>
<script type="text/javascript">
  

   var _gaq = [['_setAccount', 'UA-529275-13'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>
<!-- Start of HubSpot Embed Code -->
<script type=‚Äútext/javascript‚Äù id=‚Äúhs-script-loader‚Äù async defer src=‚Äú//js.hs-scripts.com/2768099.js‚Äù></script>
<!-- End of HubSpot Embed Code -->
</body>
</html>
