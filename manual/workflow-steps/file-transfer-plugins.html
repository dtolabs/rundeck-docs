<!DOCTYPE html>
<html>
<head>
  <title>File Transfer Plugins</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
<link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i" rel="stylesheet">
<script>
window._pageRelpath="../../";
</script>
<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
<script
src="https://code.jquery.com/jquery-2.2.4.min.js"
integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
crossorigin="anonymous"></script>
<script
src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"
integrity="sha256-xI/qyl9vpwWFOXz7+x/9WkG5j/SVnSw21viy8fWwbeE="
crossorigin="anonymous"></script>
<script src="../../jquery.autocomplete.min.js"></script>
<script src="../../docs-autocomplete.js"></script>
<!-- Latest compiled and minified JavaScript -->
  <link rel="stylesheet" href="../../styles.css" type="text/css" />
</head>
<body data-spy="scroll" data-target=".toc-nav" class="navbar-is-fixed-top">
<nav role="navigation" aria-label="main navigation" class="navbar is-fixed-top">
  <div class="container">
    <div class="navbar-brand"><a href="https://www.rundeck.com/open-source" class="navbar-item logo"><span
          data-v-ddc5174c=""><svg width="159" height="23" viewBox="0 0 159 23" xmlns="http://www.w3.org/2000/svg"
            class="logo-image" data-v-ddc5174c="">
            <g class="logo-type" fill="none" fill-rule="evenodd" data-v-ddc5174c="">
              <path
                d="M36.133 10.399v-6.26h1.073c2.78 0 4.17 1.01 4.17 3.028 0 2.155-1.43 3.232-4.285 3.232h-.959zm6.963.332c.813-1.005 1.219-2.206 1.219-3.603 0-1.788-.648-3.227-1.942-4.317-1.174-.98-3.081-1.47-5.722-1.47h-3.535v19.725h3.017v-8.074h.542l5.71 8.074h3.69l-6.189-8.407c1.33-.28 2.4-.923 3.21-1.928zM60.561 13.222c0 1.72-.28 2.96-.842 3.716-.836 1.134-2.02 1.7-3.547 1.7-1.52 0-2.697-.566-3.534-1.7-.56-.783-.84-2.021-.84-3.716V1.341H48.78V14.04c0 2.077.656 3.789 1.968 5.135 1.467 1.499 3.276 2.247 5.424 2.247 2.15 0 3.961-.748 5.438-2.247 1.312-1.346 1.967-3.058 1.967-5.135V1.341h-3.016v11.881zM82.944 15.048L68.367 0v21.065h3.016V7.256l14.577 15.01V1.341h-3.016zM100.938 16.428a6.872 6.872 0 0 1-2.434 1.418c-.897.282-2.024.422-3.379.422h-1.359V4.138h1.36c2.571 0 4.518.602 5.838 1.802 1.468 1.346 2.201 3.1 2.201 5.264 0 2.146-.742 3.887-2.227 5.224m2.175-12.544c-1.019-.92-2.153-1.571-3.404-1.955-1.166-.392-2.753-.588-4.764-.588H90.75v19.724h4.142c2.028 0 3.595-.183 4.7-.55 1.182-.365 2.312-1.017 3.391-1.954 2.15-1.873 3.224-4.325 3.224-7.357 0-3.024-1.03-5.463-3.094-7.32M110.001 21.065h11.03v-2.797h-8.014v-6.592h7.78V8.878h-7.78V4.14h8.014V1.341h-11.03zM126.52 4.574c-1.684 1.966-2.526 4.206-2.526 6.72 0 2.8 1.006 5.194 3.017 7.177 2.02 1.968 4.458 2.951 7.314 2.951 1.9 0 3.711-.48 5.437-1.442v-3.59c-.49.409-.96.758-1.404 1.047-.445.29-.873.52-1.288.69-.743.34-1.644.512-2.706.512-2.054 0-3.789-.712-5.205-2.133-1.415-1.424-2.122-3.17-2.122-5.24 0-2.094.707-3.864 2.122-5.313 1.407-1.457 3.138-2.184 5.192-2.184 1.865 0 3.668.72 5.411 2.159V2.402c-1.674-.963-3.408-1.444-5.204-1.444-3.288 0-5.967 1.205-8.039 3.615M149.912 10.27l9.037-8.928h-4.027l-7.78 7.869V1.34h-3.016v19.724h3.016v-8.163l.62-.613 7.199 8.776H159z"
                fill="#000" data-v-ddc5174c=""></path>
              <g class="logo-arrow" fill="#F7403A" data-v-ddc5174c="">
                <path
                  d="M0 21.065h13.404l2.501-3.945H2.501zM15.905 5.286L13.404 1.34H0l2.501 3.945zM18.406 9.23H5.002l1.25 1.973-1.25 1.973h13.404l1.25-1.973z"
                  data-v-ddc5174c=""></path>
              </g>
            </g>
          </svg></span></a> <a role="button" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample"
        class="navbar-burger burger"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span
          aria-hidden="true"></span></a></div>
    <div class="navbar-menu">
      <div class="navbar-start">
      </div>
      <div class="navbar-end">
        <div class="navbar-item">
        <form role="search"  action="/search/">
          <div class="field has-addons">
            <div class="control">
              <input type="text" class="input form-control navquery" name="q" placeholder="Search" id="searchQuery" autocomplete="off">
            </div>
            <div class="control">
              <button type="submit" class="button red-button">
                Search
              </button>
            </div>
          </div>
        </form>
        </div>
      </div>
    </div>
  </div>
</nav>
<div class="container">
    <nav class="breadcrumb" aria-label="breadcrumbs">
        <div class="columns">
            <div class="column is-two-thirds">
            <ul>
                
                    
                        <li><a href="../../index.html">Rundeck Documentation (3.1.0)</a></li>
                    
                        <li><a href="../index.html">User Guide</a></li>
                    
                
                
                <li class="active"><a href="file-transfer-plugins.html">File Transfer Plugins</a></li>
            </ul>
            </div>
            <div class="column">
            <ul>
                <li class="previous"><a href="builtin-workflow-steps.html"><i class="fas fa-arrow-left"></i>Builtin Workflow Steps</a></li>
                <li class="next"><a href="vmware-step-plugins-enterprise.html">VMWare Step Plugins (Enterprise) <i class="fas fa-arrow-right"></i></a></li>
            </ul>
            </div>
        </div>
    </nav>
    <div class="breadcrumb-footer">
        <a class="btn btn-link top" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+manual/workflow-steps/file-transfer.md&template=documentation-bug.md"> <i class="fas fa-flag"></i> Report a problem </a>
        <a class="btn btn-link top btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.1.x/en/manual/workflow-steps/file-transfer.md"><i class="fas fa-pencil-alt"></i> Edit this page</a>
    </div>
</div>
<div id="docbody">
<div class="container">
<div class="columns">
<div class="column is-one-quarter toc-nav">
<section class="section">
<div class="nav">
<ul>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#ssh-keys-settings">SSH Keys settings</a><ul>
<li><a href="#sftp-host-keys-setup.">SFTP Host Keys setup.</a></li>
<li><a href="#installing-a-host-key.">Installing a host key.</a></li>
<li><a href="#what-if-my-rundeck-server-is-a-windows-server">What if my Rundeck server is a windows server?</a></li>
</ul></li>
<li><a href="#examples">Examples</a><ul>
<li><a href="#copy-from-sftp-to-local">Copy from SFTP to Local</a></li>
<li><a href="#copy-from-local-to-ftp">Copy from Local to FTP</a></li>
</ul></li>
</ul>
</div>
</div>
</section>
<div class="column
is-three-quarters
">
<section class="section content">
<div class="page-header">
<h1 class="title">File Transfer Plugins</h1>
</div>
<!---
Original: 
http://download.rundeck.com/plugins/file-transfer-plugin.html
--->
<p>This plugin provides FTP/SFTP/HTTP file transfers via Workflow Steps. It is available since 2.1.0 (Rundeck Enterprise Version History)</p>
<h2 id="configuration">Configuration</h2>
<p><strong>Source</strong></p>
<ul>
<li><p><strong>URL (required)</strong>: URL for the source host. Supported protocols are: file, ftp, sftp, http, https.</p></li>
<li><p><strong>Username</strong>: Username for the source server. Required only if the protocol is not <code>file://</code>.</p></li>
<li><p><strong>Authentication Type</strong>: Source Authentication Type. Required only if the protocol is not <code>file://</code> (Key authentication just enable for SFTP protocol)</p></li>
<li><p><strong>Password</strong>: Password for the source FTP client. Required only if the protocol is not <code>file://</code>.</p></li>
<li><p><strong>Private Key</strong>: Private Key path for the source FTP client (Just for SFTP protocol).</p></li>
</ul>
<p><strong>Destination</strong></p>
<ul>
<li><p><strong>URL (required)</strong>: URL for the destination file. Supported protocols are: file, ftp, sftp.</p></li>
<li><p><strong>Username</strong>: Username for the destination server. Required only if the protocol is not <code>file://</code>.</p></li>
<li><p><strong>Authentication Type</strong>: Destination Authentication Type. Required only if the protocol is not <code>file://</code> (Key authentication just enable for SFTP protocol)</p></li>
<li><p><strong>Password</strong>: Password for the source FTP client. Required only if the protocol is not <code>file://</code>.</p></li>
<li><p><strong>Private Key</strong>: Private Key path for the destination (Just for SFTP protocol).</p></li>
</ul>
<p><strong>Options</strong></p>
<ul>
<li><p><strong>BackUp on Destination file exists?</strong>: Should back up on the Destination file if already exits?.</p></li>
<li><p><strong>BackUp on Source?</strong>: Should back up on the Source?.</p></li>
<li><p><strong>Backup on Source Path</strong>: Will use the same protocol, host, and credentials than the source.</p></li>
<li><p><strong>Delete file after operation?</strong>: Should the file be deleted after complete the operation?.</p></li>
</ul>
<h2 id="ssh-keys-settings">SSH Keys settings</h2>
<h3 id="sftp-host-keys-setup.">SFTP Host Keys setup.</h3>
<p>The SFTP endpoint of this plugin uses the SSH protocol for communication, which needs a trusted base of keys for identifying each host. This key base is commonly known in the Linux world as the <code>$HOME/.ssh/known_hosts</code> file.</p>
<p>This plugin uses the same file format to search for the host’s keys, searching them at the <code>$RDECK_BASE/.ssh/known_hosts</code> file. If a server is not specified in this file, SFTP communication will not work. In this case, you will see an error like this in the log:</p>
<pre><code>Error [JSchException] creating SFTP endpoint: UnknownHostKey: 10.10.10.4. RSA key fingerprint is 23:7a:96:8f:02:b5:0d:ad:ee:ec:69:ad:b8:c3:1b:30</code></pre>
<h3 id="installing-a-host-key.">Installing a host key.</h3>
<p>To install a host key you need to retrieve the key first. This is easily done on a Linux server using the following command:</p>
<pre><code>ssh-keyscan -t rsa &lt;SERVER ADDRESS&gt;</code></pre>
<p>This command will output a text line.</p>
<p>For example, the command <code>ssh-keyscan -t rsa 10.10.10.4</code> should output:</p>
<pre><code>10.10.10.4 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDR8LIJso4j+8l5p5Kx4Vm3gZEFzeChihD2nRqJvXZqjpo64bs6AjT8ismwTjAlzJVeFTiRW5/Kj/HAk2ipVTaNbqdwSrKBKewu0BwSWuY84VWZGC4V1R2QUS6+nMeXdi+A0BJFW3rM6uyhb+EgtyOd4ZnwKAoF01FW76zvdY3O0erwcxLZHP8y92C/Qgy+2ii8xfVGrmUNkX+neoNisMllyr+UOXzpPWFmPgyCE7r7Cptishj66XFfQI+xh5HiVL4sbnGP3jX8fC3C802znZ9XgGVENxdwIZqWfc8JzsjfHF6HD7lY/zgS5r/JcxX5Zt4gGjmzy0inJRogWCwXI1+r</code></pre>
<p>Copy this line entirely (be very careful to copy all characters) and paste it into the <code>$RDECK_BASE/.ssh/known_hosts</code> file. Ensure each hostkey text is one single line on the file. If the address reported at this text does not match the IP you need on your Rundeck server, you can change the IP address manually. You must be careful to not modify any text character besides the server address.</p>
<h3 id="what-if-my-rundeck-server-is-a-windows-server">What if my Rundeck server is a windows server?</h3>
<p>If Rundeck is running in a windows server, you have a few options:</p>
<p>You can run the above command on a Linux server (even the destination server is useful) and copy the text to your Rundeck’s known_hosts file. Be sure to set the correct address at the start of the line.</p>
<p>You can a windows SSH client to retrieve the hostkey. Be sure to retrieve the key in the correct “known_hosts” format. You can install OpenSSH on Windows to provide the <code>sh-keyscan</code> command. Known Issues When using SFTP protocol, JSCH will search for the host key at <code>%RDECK_BASE%/.ssh/known_hosts</code> file, however, the Java JVM and JSCH do not provide the default encryption algorithms used by OpenSSH (ecdsa-sha2-nistp256 as of 07-2016) resulting in failure on finding the server key even if the server is present in the known_hosts file.</p>
<p>As a workaround, be sure to extract the hostkey using the <code>-t rsa</code> parameter for <code>sh-keyscan</code>:</p>
<pre><code>ssh-keyscan -t rsa &lt;SERVER ADDRESS&gt;</code></pre>
<p>If you DO need the use of strongest encryption methods (like ecdsa), you must install the Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files on your JVM.</p>
<p>More info on this issue <a href="http://stackoverflow.com/questions/30846076/jsch-algorithm-negotiation-fail">here</a></p>
<h2 id="examples">Examples</h2>
<h3 id="copy-from-sftp-to-local">Copy from SFTP to Local</h3>
<p>This job copy a file from remote machine to the Rundeck server using SFTP</p>
<pre><code>- defaultTab: summary
  description: &#39;Copy a file from SFTP server to rundeck&#39;
  executionEnabled: true
  group: FileTransfer
  loglevel: INFO
  name: FileTransferSftp
  nodeFilterEditable: false
  scheduleEnabled: true
  sequence:
    commands:
    - configuration:
        backupDestinationFile: &#39;false&#39;
        backupSourceFile: &#39;false&#39;
        deleteFile: &#39;false&#39;
        destURLString: file:///var/lib/rundeck/
        sourceAuthentication: password
        sourcePassword: keys/node/user.password
        sourceURLString: sftp://stfp-sever:/home/user/somefile.dat
        sourceUsername: user
      nodeStep: true
      type: filetransfer
    keepgoing: false
    strategy: node-first</code></pre>
<h3 id="copy-from-local-to-ftp">Copy from Local to FTP</h3>
<p>This job copy a file from the Rundeck server to a remote machine using FTP</p>
<pre><code>- defaultTab: summary
  description: &#39;Copy a file from local to a FTP server&#39;
  executionEnabled: true
  group: FileTransfer
  loglevel: INFO
  name: FileTransferFtp
  nodeFilterEditable: false
  scheduleEnabled: true
  sequence:
    commands:
    - configuration:
        backupDestinationFile: &#39;false&#39;
        backupSourceFile: &#39;false&#39;
        deleteFile: &#39;false&#39;
        destAuthentication: password
        destPassword: keys/node/windows.password
        destURLString: ftp://windows-server/tmp/
        destUsername: Administrator
        sourceURLString: file:///var/lib/rundeck/test.txt
      nodeStep: true
      type: filetransfer
    keepgoing: false
    strategy: node-first
</code></pre>
</section>
</div>
</div>
</div>
</div>
<div class="container">
    <nav class="breadcrumb" aria-label="breadcrumbs">
        <div class="columns">
            <div class="column is-two-thirds">
            <ul>
                
                    
                        <li><a href="../../index.html">Rundeck Documentation (3.1.0)</a></li>
                    
                        <li><a href="../index.html">User Guide</a></li>
                    
                
                
                <li class="active"><a href="file-transfer-plugins.html">File Transfer Plugins</a></li>
            </ul>
            </div>
            <div class="column">
            <ul>
                <li class="previous"><a href="builtin-workflow-steps.html"><i class="fas fa-arrow-left"></i>Builtin Workflow Steps</a></li>
                <li class="next"><a href="vmware-step-plugins-enterprise.html">VMWare Step Plugins (Enterprise) <i class="fas fa-arrow-right"></i></a></li>
            </ul>
            </div>
        </div>
    </nav>
    <div class="breadcrumb-footer">
        <a class="btn btn-link bottom" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+manual/workflow-steps/file-transfer.md&template=documentation-bug.md"> <i class="fas fa-flag"></i> Report a problem </a>
        <a class="btn btn-link bottom btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.1.x/en/manual/workflow-steps/file-transfer.md"><i class="fas fa-pencil-alt"></i> Edit this page</a>
    </div>
</div>
<footer class="brand-footer">
  <div class="container">
    <div class="columns" style="margin-bottom:0;padding-top:5em;padding-bottom:5em">
      <div class="column is-1" style="padding-top:1.3em"><span><svg width="39" height="40" viewBox="0 0 39 40"
            xmlns="http://www.w3.org/2000/svg">
            <g fill="#F7403A" fill-rule="evenodd">
              <path
                d="M0 39.175h26.17l4.883-7.702H4.883zM31.053 8.368L26.17.665H0l4.883 7.703zM35.936 16.07H9.766l2.44 3.85-2.44 3.851h26.17l2.44-3.852z">
              </path>
            </g>
          </svg></span></div>
      <div class="column is-4">
        <div class="contact"><a href="tel:8336774376" class="phone is-size-3 has-text-weight-bold">(833) OPS-HERO</a>
          <div class="address address has-text-weight-bold is-size-5" style="margin-top:1em">2317
            Broadway, Suite 130
            <br>Redwood City, CA 94063
          </div>
          <div>
            <ul class="social-links">
              <li class="social-link"><a href="https://www.linkedin.com/company/17928739" role="menuitem"
                  target="_blank" aria-label="Linkedin" class="button social-link__icon"><svg aria-hidden="true"
                    focusable="false" data-prefix="fab" data-icon="linkedin" role="img"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                    class="svg-inline--fa fa-linkedin fa-w-14">
                    <path fill="currentColor"
                      d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"
                      class=""></path>
                  </svg></a></li>
              <li class="social-link"><a href="https://twitter.com/rundeck" role="menuitem" target="_blank"
                  aria-label="Twitter" class="button social-link__icon"><svg aria-hidden="true" focusable="false"
                    data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16">
                    <path fill="currentColor"
                      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"
                      class=""></path>
                  </svg></a></li>
            </ul>
          </div>
          <div class="copyright">
            <span class="copyright-text" style="font-weight:500;font-size:14px">©2019 Rundeck.
              All Rights Reserved.</span> 
              <br />
              <span class="generated-date" title="2019-09-04T19:16:11UTC">2019-09-04T19:16:11UTC</span>
          </div>
        </div>
      </div>
      <div class="column">
        <ul class="marketing-site-nav is-size-5 has-text-weight-semibold">
          <li><a href="https://www.rundeck.com/about" role="menuitem">About</a>
          </li>
          <li><a href="https://www.rundeck.com/about/team" role="menuitem">Team</a></li>
          <li><a href="https://www.rundeck.com/careers" role="menuitem">Careers</a></li>
          <li><a href="https://www.rundeck.com/news" role="menuitem">News</a>
          </li>
          <li><a href="https://www.rundeck.com/events" role="menuitem">Events</a>
          </li>
          <li><a href="https://www.rundeck.com/privacy-policy" role="menuitem">Privacy Policy</a></li>
          <li><a href="https://www.rundeck.com/terms" role="menuitem">Terms of
              Use</a></li>
          <li><a href="https://www.rundeck.com/contact" role="menuitem">Contact</a></li>
          <li><a href="https://www.rundeck.com/demo" role="menuitem">Request a
              Demo</a></li>
        </ul>
      </div>
    </div>
    <div class="creative-commons">
      <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Rundeck Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://rundeck.com" property="cc:attributionName" rel="cc:attributionURL">Rundeck, Inc</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License. </a>
    </div>
  </div>
</footer>

<script type="text/javascript">
   var _gaq = [['_setAccount', 'UA-529275-13'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>

<script>window.markdeepOptions={mode:'html'};</script>
<!-- Markdeep: --><script src="../../markdeep.min.js"></script>
<!-- <script src="https://casual-effects.com/markdeep/latest/markdeep.min.js"></script> -->

<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/2768099.js"></script>
<!-- End of HubSpot Embed Code -->
<div class='scrolltop'>
<div class='scrollitem icon'>
<i class="fas fa-chevron-up" ></i>
</div>
</div>
</body>
</html>
