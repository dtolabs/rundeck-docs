<!DOCTYPE html>
<html>
<head>
  <title>rd-acl</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Greg Schueler" />
  <meta name="author" content="Alex Honor" />
  <meta name="date" content="April 6, 2015" />
<link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i" rel="stylesheet">
<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Latest compiled and minified JavaScript -->

<script type="text/javascript">
var jq = jQuery.noConflict();
jq(document).ready(function(){
  jq('.navbar-burger').click(function(){
    jq('.navbar-menu').toggle();
  });
})
jq(window).scroll(function() {
    if (jq(this).scrollTop() > 50 ) {
        jq('.scrolltop:hidden').stop(true, true).fadeIn();
    } else {
        jq('.scrolltop').stop(true, true).fadeOut();
    }
});
jq(function(){jq(".scrollitem").click(function(){jq("html,body").animate({scrollTop:jq("body").offset().top},"1000");return false})})
jq(window).scroll(function() {    
    var scroll = jq(window).scrollTop();
    if (scroll >= 250) {
      jq(".navbar").addClass("has-shadow");
    } else {
      jq(".navbar").removeClass("has-shadow");
    }
}); //missing );

window._pageRelpath="../";
jQuery(function(){
  jQuery('table').addClass('table table-condensed table-responsive'); 
  // jQuery('[data-toggle="popover"]').popover();
});
</script>

  <link rel="stylesheet" href="../styles.css" type="text/css" />
</head>
<body data-spy="scroll" data-target=".toc-nav" class="navbar-is-fixed-top">
<nav role="navigation" aria-label="main navigation" class="navbar is-fixed-top">
  <div class="container">
    <div class="navbar-brand"><a href="https://www.rundeck.com/open-source" class="navbar-item logo"><span
          data-v-ddc5174c=""><svg width="159" height="23" viewBox="0 0 159 23" xmlns="http://www.w3.org/2000/svg"
            class="logo-image" data-v-ddc5174c="">
            <g class="logo-type" fill="none" fill-rule="evenodd" data-v-ddc5174c="">
              <path
                d="M36.133 10.399v-6.26h1.073c2.78 0 4.17 1.01 4.17 3.028 0 2.155-1.43 3.232-4.285 3.232h-.959zm6.963.332c.813-1.005 1.219-2.206 1.219-3.603 0-1.788-.648-3.227-1.942-4.317-1.174-.98-3.081-1.47-5.722-1.47h-3.535v19.725h3.017v-8.074h.542l5.71 8.074h3.69l-6.189-8.407c1.33-.28 2.4-.923 3.21-1.928zM60.561 13.222c0 1.72-.28 2.96-.842 3.716-.836 1.134-2.02 1.7-3.547 1.7-1.52 0-2.697-.566-3.534-1.7-.56-.783-.84-2.021-.84-3.716V1.341H48.78V14.04c0 2.077.656 3.789 1.968 5.135 1.467 1.499 3.276 2.247 5.424 2.247 2.15 0 3.961-.748 5.438-2.247 1.312-1.346 1.967-3.058 1.967-5.135V1.341h-3.016v11.881zM82.944 15.048L68.367 0v21.065h3.016V7.256l14.577 15.01V1.341h-3.016zM100.938 16.428a6.872 6.872 0 0 1-2.434 1.418c-.897.282-2.024.422-3.379.422h-1.359V4.138h1.36c2.571 0 4.518.602 5.838 1.802 1.468 1.346 2.201 3.1 2.201 5.264 0 2.146-.742 3.887-2.227 5.224m2.175-12.544c-1.019-.92-2.153-1.571-3.404-1.955-1.166-.392-2.753-.588-4.764-.588H90.75v19.724h4.142c2.028 0 3.595-.183 4.7-.55 1.182-.365 2.312-1.017 3.391-1.954 2.15-1.873 3.224-4.325 3.224-7.357 0-3.024-1.03-5.463-3.094-7.32M110.001 21.065h11.03v-2.797h-8.014v-6.592h7.78V8.878h-7.78V4.14h8.014V1.341h-11.03zM126.52 4.574c-1.684 1.966-2.526 4.206-2.526 6.72 0 2.8 1.006 5.194 3.017 7.177 2.02 1.968 4.458 2.951 7.314 2.951 1.9 0 3.711-.48 5.437-1.442v-3.59c-.49.409-.96.758-1.404 1.047-.445.29-.873.52-1.288.69-.743.34-1.644.512-2.706.512-2.054 0-3.789-.712-5.205-2.133-1.415-1.424-2.122-3.17-2.122-5.24 0-2.094.707-3.864 2.122-5.313 1.407-1.457 3.138-2.184 5.192-2.184 1.865 0 3.668.72 5.411 2.159V2.402c-1.674-.963-3.408-1.444-5.204-1.444-3.288 0-5.967 1.205-8.039 3.615M149.912 10.27l9.037-8.928h-4.027l-7.78 7.869V1.34h-3.016v19.724h3.016v-8.163l.62-.613 7.199 8.776H159z"
                fill="#000" data-v-ddc5174c=""></path>
              <g class="logo-arrow" fill="#F7403A" data-v-ddc5174c="">
                <path
                  d="M0 21.065h13.404l2.501-3.945H2.501zM15.905 5.286L13.404 1.34H0l2.501 3.945zM18.406 9.23H5.002l1.25 1.973-1.25 1.973h13.404l1.25-1.973z"
                  data-v-ddc5174c=""></path>
              </g>
            </g>
          </svg></span></a> <a role="button" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample"
        class="navbar-burger burger"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span
          aria-hidden="true"></span></a></div>
    <div class="navbar-menu">
      <div class="navbar-start">
      </div>
      <div class="navbar-end">
        <div class="navbar-item">
        <form role="search"  action="/search/">
          <div class="field has-addons">
            <div class="control">
              <input class="input" type="text" placeholder="Keyword">
            </div>
            <div class="control">
              <button type="submit" class="button red-button">
                Search
              </button>
            </div>
          </div>
        </form>
        </div>
      </div>
    </div>
  </div>
</nav>
<div class="container">
    <nav class="breadcrumb" aria-label="breadcrumbs">
        <div class="columns">
            <div class="column is-two-thirds">
            <ul>
                
                    
                        <li><a href="../index.html">Rundeck Documentation (3.1.x)</a></li>
                    
                
                <li ><a href="index.html">Command Line Tools</a></li>
                <li class="active"><a href="rd-acl.html">rd-acl</a></li>
            </ul>
            </div>
            <div class="column">
            <ul>
                
                <li class="next"><a href="rd-rundeck-client-cli-tool.html">RD: Rundeck Client CLI Tool <i class="fas fa-arrow-right"></i></a></li>
            </ul>
            </div>
        </div>
    </nav>
    <div class="breadcrumb-footer">
        <a class="btn btn-link top" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+manpages/man1/rd-acl.md&template=documentation-bug.md"> <i class="fas fa-flag"></i> Report a problem </a>
        <a class="btn btn-link top btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/manpages/man1/rd-acl.md"><i class="fas fa-pencil-alt"></i> Edit this page</a>
    </div>
</div>
<div id="docbody">
<div class="container">
<div class="columns">
<div class="column is-one-quarter toc-nav">
<section class="section sticky-toc">
<div class="nav">
<ul>
<li><a href="#name">Name</a></li>
<li><a href="#synopsis">Synopsis</a></li>
<li><a href="#description">Description</a></li>
<li><a href="#related">Related</a></li>
<li><a href="#options">Options</a><ul>
<li><a href="#test-and-validate-command-options">Test and Validate Command Options</a></li>
<li><a href="#create-command-options">Create Command Options</a></li>
<li><a href="#common-options">Common Options</a></li>
<li><a href="#list-command-options">List Command Options</a></li>
</ul></li>
<li><a href="#test-command">Test Command</a></li>
<li><a href="#list-command">List Command</a></li>
<li><a href="#create-command">Create Command</a></li>
<li><a href="#validate-command">Validate Command</a></li>
<li><a href="#see-also">See Also</a></li>
</ul>
</div>
</div>
</section>
<div class="column">
<section class="section content">
<div class="page-header">
<h1 class="title">rd-acl</h1>
</div>
<h2 id="name">Name</h2>
<p>rd-acl - Test and generate Rundeck ACL policy files.</p>
<h2 id="synopsis">Synopsis</h2>
<p><code>rd-acl [*command*] [*command options*]...</code></p>
<h2 id="description">Description</h2>
<p>The rd-acl command can test aclpolicy files to check whether they will allow a certain action request or not.</p>
<p>It can also list the results for all defined access tests for a user or group.</p>
<p>It can also generate the correct policy for a certain action. This can be done in a semi-interactive mode by specifying each <a href="#common-options">Common Option</a> in turn, allowing it to prompt you with a set of next possible options.</p>
<p>It can also take as input the output from the Rundeck AUDIT log, and generate ACL policy definitions to allow any disallowed actions.</p>
<p>It can also validate one or more files.</p>
<p>The tool works in these <em>COMMAND</em> modes:</p>
<dl>
<dt><code>test</code></dt>
<dd>test one or more aclpolicy files to determine if an action would be allowed.
</dd>
<dt><code>list</code></dt>
<dd>list all access tests for a user or group for one or more aclpolicy files.
</dd>
<dt><code>create</code></dt>
<dd>generate the correct ACL policy YAML definition for a specific action, or to allow a previously rejected action as logged in the Rundeck AUDIT log.
</dd>
<dt><code>validate</code></dt>
<dd>Validate a file or directory of files, and print messages about problems with the files.
</dd>
</dl>
<h2 id="related">Related</h2>
<p>See:</p>
<ul>
<li><a href="../man5/aclpolicy.html" title="Document Format Reference - ACLPOLICY">ACL Policy syntax</a></li>
<li><a href="../administration/security/access-control-policy.html" title="Administrator Guide - Security - Access Control Policy">Access Control Policy</a></li>
</ul>
<h2 id="options">Options</h2>
<dl>
<dt><code>-h, --help</code></dt>
<dd>Print usage message.
</dd>
<dt><code>-v, --verbose</code></dt>
<dd>Run verbosely.
</dd>
</dl>
<h3 id="test-and-validate-command-options">Test and Validate Command Options</h3>
<p>The <code>test</code> and <code>validate</code> commands take these input options.</p>
<dl>
<dt><code>-d, --dir &lt;dir&gt;</code></dt>
<dd>Directory. Load all policy files in the specified directory.
</dd>
<dt><code>-f, --file &lt;file&gt;</code></dt>
<dd>File path. Load the specified aclpolicy file.
</dd>
<dt><code>-v</code></dt>
<dd>If the tested action is not allowed, print the necessary ACL policy to allow it (as per the <code>create</code> action.)
</dd>
</dl>
<p>One of <code>--dir</code> or <code>--file</code> is required for the <code>test</code> command. If the rdeck.base system property is defined, then the Rundeck “etc” dir will be used as for the <code>--dir</code> option by default.</p>
<p>In addition, the <code>test</code> command also takes the <a href="#common-options">Common Options</a> and these options:</p>
<dl>
<dt><code>-V, --validate</code></dt>
<dd>Validate all input files, and exit with non-zero exit code if validation fails. (<code>test</code> and <code>list</code> actions.)
</dd>
</dl>
<h3 id="create-command-options">Create Command Options</h3>
<p>In addition to the <a href="#common-options">Common Options</a>, the <code>create</code> command takes these input options.</p>
<dl>
<dt><code>-i, --input &lt;file | -&gt;</code></dt>
<dd>Parse the Rundeck AUDIT log input, and for any REJECTED decisions, generate the appropriate aclpolicy to allow the action. If the value of the <code>--input</code> option is <code>-</code> (dash character), then the STDIN is read. If <code>--input</code> is used, then the Common Options are ignored.
</dd>
<dt><code>-r, --regex</code></dt>
<dd>Match the resource using regular expressions. (create command).
</dd>
</dl>
<h3 id="common-options">Common Options</h3>
<p>These options define the Context, Subject, Action, and Resource, which are used both to define an Access Request (for the <code>test</code> command), and to define a rule in the ACL Policy (for the <code>create</code> command).</p>
<p><strong>Context options:</strong></p>
<dl>
<dt><code>-c,--context &lt;application | project&gt;</code></dt>
<dd>Context: either ‘project’ or ‘application’. For project context, the <code>-p,--project</code> option is required.
</dd>
</dl>
<p><strong>Subject options:</strong></p>
<dl>
<dt><code>-g,--groups &lt;group,...&gt;</code></dt>
<dd>Subject Groups names. Comma-separated list of user groups to validate (test command) or for by: clause (create command).
</dd>
<dt><code>-u,--user &lt;user,...&gt;</code></dt>
<dd>Subject User name. Comma-separated list of user names to validate (test command) or for by: clause (create command).
</dd>
</dl>
<p><strong>Action options:</strong></p>
<dl>
<dt><code>-a,--allow &lt;action,...&gt;</code></dt>
<dd>Actions to test are allowed (test command) or to allow (create command).
</dd>
<dt><code>-D,--deny &lt;action,...&gt;</code></dt>
<dd>Actions to test are denied (test command) or to deny (create command).
</dd>
</dl>
<p><strong>Resource Options:</strong></p>
<p>Resources are characterized as either “specific resources”, or “resource types” (see <a href="../administration/security/access-control-policy.html#specific-resources-and-resource-types" title="Administrator Guide - Security - Access Control Policy - Specific Resources And Resource Types">Specific Resources and Resource Types</a>). You can specify “resource types” using the <code>-G, --generic &lt;kind&gt;</code> option. All specific resources can be specified directly using one of the options, or by type using <code>-R, --resource &lt;type&gt;</code> in combination with <code>-b, --attributes &lt;attr=val ...&gt;</code>.</p>
<dl>
<dt><code>-G,--generic &lt;kind&gt;</code></dt>
<dd>Generic resource kind.
</dd>
<dt><code>-R,--resource &lt;type&gt;</code></dt>
<dd>Resource type name.
</dd>
<dt><code>-b,--attributes &lt;key=value ...&gt;</code></dt>
<dd>Attributes for the resource. A sequence of key=value pairs, multiple pairs can follow with a space. Use a value of ‘?’ to see suggestions.
</dd>
</dl>
<p>The following define <a href="../administration/security/access-control-policy.html#project-scope-resources-and-actions" title="Administrator Guide - Security - Access Control Policy - Project Scope Resources And Actions">Project scope resources</a>:</p>
<dl>
<dt><code>-A,--adhoc</code></dt>
<dd>Adhoc execution (project context)
</dd>
<dt><code>-j,--job &lt;group/name&gt;</code></dt>
<dd>Job group/name. (project context)
</dd>
<dt><code>-I,--jobUuid &lt;uuid&gt;</code></dt>
<dd>Job uuid. (project context)
</dd>
<dt><code>-n,--node &lt;nodename&gt;</code></dt>
<dd>Node name. (project context)
</dd>
<dt><code>-t,--tags &lt;tag,..&gt;</code></dt>
<dd>Node tags. If specified, the resource match will be defined using ‘contains’. (project context)
</dd>
</dl>
<p>The following define <a href="../administration/security/access-control-policy.html#application-scope-resources-and-actions" title="Administrator Guide - Security - Access Control Policy - Application Scope Resources And Actions">Application scope resources</a>:</p>
<dl>
<dt><code>-s,--storage &lt;path/file&gt;</code></dt>
<dd>Storage path/name. (application context)
</dd>
<dt><code>-p,--project &lt;project&gt;</code></dt>
<dd>Name of project, used in project context or for application resource.
</dd>
</dl>
<h3 id="list-command-options">List Command Options</h3>
<p>The <code>list</code> command uses these <a href="#test-command-options">Test Command Options</a> to set the aclpolicy files to be evaluated: <code>-f,--file</code> and <code>-d,--dir</code>.</p>
<p>It also allows these options from the <a href="#common-options">Common Options</a>:</p>
<p>The Subject options: <code>-g,--groups</code> and <code>-u,--user</code></p>
<p>These Resource options:</p>
<ul>
<li><code>-p,--project</code> name of a project to test</li>
<li><code>-s,--storage</code> Storage path/name</li>
<li><code>-n,--node</code> or <code>-t,--tags</code> name or tags of a node to tests</li>
<li><code>-j,--job</code> Job group/name.</li>
<li><code>-I,--jobUuid</code> Job uuid.</li>
</ul>
<h2 id="test-command">Test Command</h2>
<p>The Test command loads the specified aclpolicy file or directory of files, and evaluates the Access Request defined by the <a href="#common-options">Common Options</a>, and emits the decision of whether the request is allowed, disallowed, or denied. If it is allowed, then <code>rd-acl</code> will exit with a 0 exit code, otherwise it will exit with 2 exit code.</p>
<p>If the <code>-v, --verbose</code> flag is enabled, and the decision was not “allowed”, then it will additionally automatically invoke the <a href="#create-command">Create Command</a> to generate an aclpolicy definition to allow the requested action.</p>
<p><strong>Note:</strong> If the decision was “denied”, then that indicates a specific DENY rule matches the Access Request. A DENY rule that matches will override all ALLOW rules that match.</p>
<p><em>Examples</em></p>
<p>Test all aclpolicy files in the Rundeck “etc” directory by default, with an allowed result for <code>read</code> action:</p>
<pre><code>rd-acl test --context application --groups test --storage keys/test1.pem --allow read
Using configured Rundeck etc dir: /etc/rundeck
The result was: allowed</code></pre>
<p>Test all aclpolicy files in the Rundeck “etc” directory by default, with a rejected result for <code>create</code> action:</p>
<pre><code>rd-acl test --context application --groups test --storage keys/key1.pem --allow create
Using configured Rundeck etc dir: /etc/rundeck
Result: REJECTED
The result was: not allowed</code></pre>
<p>The same as above, using the <code>--verbose</code> flag</p>
<pre><code>rd-acl test --context application --groups test --storage keys/key1.pem --allow create -v
Using configured Rundeck etc dir: /etc/rundeck
Result: REJECTED
Decision for: res&lt;name:key1.pem, path:keys, type:storage&gt; subject&lt;Username:user Group:test&gt; action&lt;create&gt; env&lt;http://dtolabs.com/rundeck/env/application:rundeck&gt;: authorized: false: REJECTED, reason: REJECTED, evaluations: None
The result was: not allowed
Policies to allow the requested actions:
## create or append this to a .aclpolicy file
---
for:
  storage:
  - allow: create
    equals:
      name: key1.pem
      path: keys
description: generated
context:
  application: rundeck
by:
  group: test</code></pre>
<h2 id="list-command">List Command</h2>
<p>The List command loads the specified aclpolicy file or directory of files, and evaluates all access requests possible for the specified Group or User. It lists the decision of whether each request is allowed, disallowed, or denied.</p>
<p>Further evaluations can be done by supplying some concrete values to identify a Project, Nodes, Jobs, and a Storage path.</p>
<p>If the <code>-v, --verbose</code> flag is enabled, and the decision was “denied”, then it will print the decision details including the file name of the policy rule that denies the request.</p>
<p>In the output, a line starting with <code>-</code> indicates the action was rejected, <code>+</code> indicates the action was allowed, and <code>!</code> indicates the action was denied.</p>
<p>The evaluation lines are in the form:</p>
<pre><code>&lt;result&gt; &lt;action&gt;: &lt;resource&gt; [&lt;reason&gt;]</code></pre>
<p><em>Examples</em></p>
<p>List results for just a group name:</p>
<pre><code>rd-acl list -g api_token_group
Using configured Rundeck etc dir: /etc/rundeck
# Application Context access for group api_token_group


(No project (-p) specified, skipping Application context actions for a specific project.)


(No storage path (-s) specified, skipping Application context actions for a specific storage path.)

- create: project [REJECTED]
+ read: system
- admin: job [REJECTED]
- admin: user [REJECTED]

(No project (-p) specified, skipping Project context listing.)</code></pre>
<p>Add a <code>-p</code> to specify a project:</p>
<pre><code>rd-acl list  -g api_token_group -p test
Using configured Rundeck etc dir: /etc/rundeck
# Application Context access for group api_token_group

- admin: project named &quot;test&quot; [REJECTED]
- delete_execution: project named &quot;test&quot; [REJECTED]
- import: project named &quot;test&quot; [REJECTED]
+ read: project named &quot;test&quot;
- export: project named &quot;test&quot; [REJECTED]
- configure: project named &quot;test&quot; [REJECTED]
- delete: project named &quot;test&quot; [REJECTED]

(No storage path (-s) specified, skipping Application context actions for a specific storage path.)

- create: project [REJECTED]
+ read: system
- admin: job [REJECTED]
- admin: user [REJECTED]

# Project &quot;test&quot; access for group api_token_group

- runAs: Adhoc executions [REJECTED]
+ kill: Adhoc executions
+ run: Adhoc executions
+ read: Adhoc executions
- killAs: Adhoc executions [REJECTED]

(No job (-j) specified, skipping Project context actions for a specific job.)


(No node (-n) or tags (-t) specified, skipping Project context actions for a specific node or node tags.)

+ read: node
+ refresh: node
+ create: node
+ update: node
+ create: event
+ read: event
+ create: job
+ delete: job</code></pre>
<p>Include <code>-j</code>, <code>-n</code> and <code>-s</code>:</p>
<pre><code>rd-acl list  -g api_token_group -p test -s keys/boingo.pem -j test/job -n mynode
Using configured Rundeck etc dir: /etc/rundeck
# Application Context access for group api_token_group

- configure: project named &quot;test&quot; [REJECTED]
- import: project named &quot;test&quot; [REJECTED]
- export: project named &quot;test&quot; [REJECTED]
- delete: project named &quot;test&quot; [REJECTED]
- delete_execution: project named &quot;test&quot; [REJECTED]
+ read: project named &quot;test&quot;
- admin: project named &quot;test&quot; [REJECTED]
+ read: storage path &quot;keys/boingo.pem&quot;
+ update: storage path &quot;keys/boingo.pem&quot;
! delete: storage path &quot;keys/boingo.pem&quot; [REJECTED_DENIED]
+ create: storage path &quot;keys/boingo.pem&quot;
- create: project [REJECTED]
+ read: system
- admin: job [REJECTED]
- admin: user [REJECTED]

# Project &quot;test&quot; access for group api_token_group

- runAs: Adhoc executions [REJECTED]
- killAs: Adhoc executions [REJECTED]
+ kill: Adhoc executions
+ run: Adhoc executions
+ read: Adhoc executions
+ run: Job &quot;test/job&quot;
- runAs: Job &quot;test/job&quot; [REJECTED]
+ create: Job &quot;test/job&quot;
+ read: Job &quot;test/job&quot;
+ delete: Job &quot;test/job&quot;
+ update: Job &quot;test/job&quot;
- killAs: Job &quot;test/job&quot; [REJECTED]
+ kill: Job &quot;test/job&quot;
+ read: Node &quot;mynode&quot;
+ run: Node &quot;mynode&quot;
+ update: node
+ refresh: node
+ read: node
+ create: node
+ create: event
+ read: event
+ delete: job
+ create: job</code></pre>
<p>Using the <code>-v</code> verbose flag shows more detail about the REJECTED_DENIED result:</p>
<pre><code>rd-acl list  -g api_token_group -p test -s keys/boingo.pem -v
Using configured Rundeck etc dir: /etc/rundeck
# Application Context access for group api_token_group

...snip
! delete: storage path &quot;keys/boingo.pem&quot; [REJECTED_DENIED]
  REJECTED, reason: REJECTED_DENIED, evaluations:   /etc/rundeck/apitoken.aclpolicy[2][rule: 1: {match={path=(keys|keys/.*)}, allow=*, deny=delete}] for actions: [delete] =&gt; REJECTED_DENIED
...snip
</code></pre>
<h2 id="create-command">Create Command</h2>
<p>The Create Command can generate ACL Policy YAML definitions based on the <a href="#common-options">Common Options</a>. It can also parse the output from an authorization evaluation, as logged in the Rundeck AUDIT log, and generate the policy necessary to allow any REJECTED evaluations. In the case of DENIED evaluations, it will still generate a policy to allow the access request, but note that the DENY rule would need to be removed to actually allow the specified action.</p>
<p>Create has a “semi-interactive” behavior. If you enter only some components of the Subject, Context, Action and Resource necessary to define a rule, then it will prompt with some possible values for the next component.</p>
<p><em>Examples</em></p>
<p>Begin by typing the <code>create</code> command with no options</p>
<pre><code>rd-acl create 
-c/--context is required.
Choose one of: 
  -c application
    Access to projects, users, storage, system info.
  -c project
    Access to jobs, nodes, events, within a project.</code></pre>
<p>Add a <code>-c project</code> option:</p>
<pre><code>rd-acl create -c project
-p/--project is required.
Choose the name of a project, or .*: 
  -p myproject
  -p &#39;.*&#39;</code></pre>
<p>Add a <code>-p</code> option:</p>
<pre><code>rd-acl create -c project -p &#39;.*&#39;
-g/--groups &lt;group,...&gt; or -u/--user &lt;user,...&gt; are required
  -u user1,user2... 
  -g group1,group2... 
    Groups control access for a set of users, and correspond
    to authorization roles.</code></pre>
<p>Add a <code>-g</code> option:</p>
<pre><code>rd-acl create -c project -p &#39;.*&#39; -g test
Project-context resource option is required.
Possible options:
  Job: -j/--job &lt;group/name&gt;
    View, modify, create*, delete*, run, and kill specific jobs.
    * Create and delete also require additional -G/--generic &lt;kind&gt; level access.
  Adhoc: -A/--adhoc
    View, run, and kill adhoc commands.
  Node: -n/--node &lt;nodename&gt;
      : -t/--tags &lt;tag,..&gt;
    View and run on specific nodes by name or tag.
  Resource: -R/--resource &lt;type&gt;
    Specify the resource type directly. -b/--attributes &lt;key=value ...&gt; should also be used.
    resource types in this context: 
    node
    job
    adhoc
  Generic: -G/--generic &lt;kind&gt;
    Create and delete jobs.
    View and manage nodes.
    View events.
    generic kinds in this context: 
    node
    event
    job</code></pre>
<p>Here we see several options to specify the resource. the <code>Job</code>, <code>Adhoc</code> and <code>Node</code> options define both the resource type, and some resource attributes. The <code>-R</code> option can set the resource type directly, and then the <code>-b</code> attributes option can be used to define the attributes.<br />
Otherwise the <code>-G</code> option can be used to match a resource kind.</p>
<p>We will specify node tags using <code>-t</code>:</p>
<pre><code>rd-acl create -c project -p &#39;.*&#39; -g test -t prod,www
-a/--allow or -D/--deny is required.
  -a action1,action2,...
  -D action1,action2,...
Possible actions in this context: 
  *
  read
  run</code></pre>
<p>Now we are prompted to choose actions to allow or deny for the rule, and the ACL policy definition is printed.</p>
<pre><code>rd-acl create -c project -p &#39;.*&#39; -g test -t prod,www -a read -D run
## create or append this to a .aclpolicy file
---
for:
  node:
  - allow: read
    deny: run
    contains:
      tags:
      - prod
      - www
description: generated
context:
  project: .*
by:
  group: test</code></pre>
<h2 id="validate-command">Validate Command</h2>
<p>The Validate command loads the specified aclpolicy file or directory of files, and validates the aclpolicy definitions. It prints any errors found and it will exit with a 0 exit code if no errors are found, otherwise it will exit with 2 exit code.</p>
<p><em>Examples</em></p>
<p>Validate all aclpolicy files in the Rundeck “etc” directory by default:</p>
<pre><code>$ rd-acl validate
Using configured Rundeck etc dir: /etc/rundeck
The validation passed</code></pre>
<p>Validate a specific file:</p>
<pre><code>$ rd-acl validate -f bad5.aclpolicy
/Users/greg/rundeck25/bad5.aclpolicy[1]:
  Context section is not valid: {xproject=asdf}, it should contain only &#39;application:&#39; or &#39;project:&#39;
The validation failed</code></pre>
<h2 id="see-also">See Also</h2>
<p><a href="../man5/aclpolicy.html" title="Document Format Reference - ACLPOLICY"><code>aclpolicy</code></a></p>
<p><a href="../administration/security/access-control-policy.html" title="Administrator Guide - Security - Access Control Policy">Access Control Policy</a></p>
</section>
</div>
</div>
</div>
</div>
<div class="container">
    <nav class="breadcrumb" aria-label="breadcrumbs">
        <div class="columns">
            <div class="column is-two-thirds">
            <ul>
                
                    
                        <li><a href="../index.html">Rundeck Documentation (3.1.x)</a></li>
                    
                
                <li ><a href="index.html">Command Line Tools</a></li>
                <li class="active"><a href="rd-acl.html">rd-acl</a></li>
            </ul>
            </div>
            <div class="column">
            <ul>
                
                <li class="next"><a href="rd-rundeck-client-cli-tool.html">RD: Rundeck Client CLI Tool <i class="fas fa-arrow-right"></i></a></li>
            </ul>
            </div>
        </div>
    </nav>
    <div class="breadcrumb-footer">
        <a class="btn btn-link bottom" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+manpages/man1/rd-acl.md&template=documentation-bug.md"> <i class="fas fa-flag"></i> Report a problem </a>
        <a class="btn btn-link bottom btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/manpages/man1/rd-acl.md"><i class="fas fa-pencil-alt"></i> Edit this page</a>
    </div>
</div>
<footer class="brand-footer">
  <div class="container">
    <div class="columns" style="margin-bottom:0;padding-top:5em;padding-bottom:5em">
      <div class="column is-1" style="padding-top:1.3em"><span><svg width="39" height="40" viewBox="0 0 39 40"
            xmlns="http://www.w3.org/2000/svg">
            <g fill="#F7403A" fill-rule="evenodd">
              <path
                d="M0 39.175h26.17l4.883-7.702H4.883zM31.053 8.368L26.17.665H0l4.883 7.703zM35.936 16.07H9.766l2.44 3.85-2.44 3.851h26.17l2.44-3.852z">
              </path>
            </g>
          </svg></span></div>
      <div class="column is-4">
        <div class="contact"><a href="tel:8336774376" class="phone is-size-3 has-text-weight-bold">(833) OPS-HERO</a>
          <div class="address address has-text-weight-bold is-size-5" style="margin-top:1em">2317
            Broadway, Suite 130
            <br>Redwood City, CA 94063
          </div>
          <div>
            <ul class="social-links">
              <li class="social-link"><a href="https://www.linkedin.com/company/17928739" role="menuitem"
                  target="_blank" aria-label="Linkedin" class="button social-link__icon"><svg aria-hidden="true"
                    focusable="false" data-prefix="fab" data-icon="linkedin" role="img"
                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                    class="svg-inline--fa fa-linkedin fa-w-14">
                    <path fill="currentColor"
                      d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"
                      class=""></path>
                  </svg></a></li>
              <li class="social-link"><a href="https://twitter.com/rundeck" role="menuitem" target="_blank"
                  aria-label="Twitter" class="button social-link__icon"><svg aria-hidden="true" focusable="false"
                    data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16">
                    <path fill="currentColor"
                      d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"
                      class=""></path>
                  </svg></a></li>
            </ul>
          </div>
          <div class="copyright">
            <span class="copyright-text" style="font-weight:500;font-size:14px">©2019 Rundeck.
              All Rights Reserved.</span> 
              <br />
              <span class="generated-date" title="2019-06-18T18:00:35UTC">2019-06-18T18:00:35UTC</span>
          </div>
        </div>
      </div>
      <div class="column">
        <ul class="marketing-site-nav is-size-5 has-text-weight-semibold">
          <li><a href="https://www.rundeck.com/about" role="menuitem">About</a>
          </li>
          <li><a href="https://www.rundeck.com/about/team" role="menuitem">Team</a></li>
          <li><a href="https://www.rundeck.com/careers" role="menuitem">Careers</a></li>
          <li><a href="https://www.rundeck.com/news" role="menuitem">News</a>
          </li>
          <li><a href="https://www.rundeck.com/events" role="menuitem">Events</a>
          </li>
          <li><a href="https://www.rundeck.com/privacy-policy" role="menuitem">Privacy Policy</a></li>
          <li><a href="https://www.rundeck.com/terms" role="menuitem">Terms of
              Use</a></li>
          <li><a href="https://www.rundeck.com/contact" role="menuitem">Contact</a></li>
          <li><a href="https://www.rundeck.com/demo" role="menuitem">Request a
              Demo</a></li>
        </ul>
      </div>
    </div>
    <div class="creative-commons">
      <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Rundeck Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://rundeck.com" property="cc:attributionName" rel="cc:attributionURL">Rundeck, Inc</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License. </a>
    </div>
  </div>
</footer>

<script type="text/javascript">
   var _gaq = [['_setAccount', 'UA-529275-13'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>

<script>window.markdeepOptions={mode:'html'};</script>
<!-- Markdeep: --><script src="../markdeep.min.js"></script>
<!-- <script src="https://casual-effects.com/markdeep/latest/markdeep.min.js"></script> -->

<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/2768099.js"></script>
<!-- End of HubSpot Embed Code -->
<div class='scrolltop'>
<div class='scrollitem icon'>
<i class="fas fa-chevron-up" ></i>
</div>
</div>
</body>
</html>
