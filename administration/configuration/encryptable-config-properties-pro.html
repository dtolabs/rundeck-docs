<!DOCTYPE html>
<html>
<head>
  <title>Rundeck PRO Config Property Encryption</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">

<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="../../jquery.hotkeys.js"></script>
<script src="../../jquery.autocomplete.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript">
window._pageRelpath="../../";
jQuery(function(){
  jQuery('table').addClass('table table-condensed table-responsive'); 
  jQuery('[data-toggle="popover"]').popover();
});
</script>
<script src="../../docs-autocomplete.js"></script>
  <link rel="stylesheet" href="../../style.css" type="text/css" />
</head>
<body data-spy="scroll" data-target=".toc-nav">
<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="container-fluid">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="https://www.rundeck.com/open-source">
      Rundeck
      <p class="small rd_version">← Return to Rundeck Project</p>
    </a>
  </div>
  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <form class="navbar-form navbar-right" role="search"  action="/search/">
      <div class="form-group">
        <input type="text" class="form-control navquery" name="q" placeholder="Search" id="searchQuery">
      </div>
      <button type="submit" class="btn btn-default">Submit</button>
    </form>
  </div>
  </div>
</nav>

<div class="container top breadcrumb_holder">
<div class="row">
<div class="col-sm-6" id="#breadcrumbstop">

<div class="navquerytoggle collapse" aria-expanded="false">
<div class="input-group ">
    <a class="input-group-addon btn btn-xs" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbstop"><i class="glyphicon glyphicon-search"></i></a>
    <input type="text" class="form-control navquery  " name="q" placeholder="Search" autofocus="true">    
    <a class="input-group-addon btn btn-xs" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbstop"><i class="glyphicon glyphicon-remove"></i></a>
</div>
</div>

<ol class="breadcrumb top collapse in navquerytoggle" aria-expanded="true">
    <li class="navquerytrigger collapse" title="Find a page by name. (Keyboard shortcut: q)" data-toggle="tooltip" data-container="body">
        <a class="btn btn-xs btn-link" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbstop">
            <i class="glyphicon glyphicon-search"></i>
        </a>
    </li>

    
        <li><a href="../../index.html">Rundeck Documentation (3.0.x)</a></li>
    
        <li><a href="../index.html">Administrator Guide</a></li>
    
    
    <li ><a href="index.html">Rundeck Configuration</a></li>
    <li class="active"><a href="encryptable-config-properties-pro.html">Encryptable Config Properties (Pro)</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="system-properties-configuration.html"><i class="glyphicon glyphicon-arrow-left"></i> System Properties Configuration</a></li>
      <li class="next"><a href="storage-facility.html">Storage Facility <i class="glyphicon glyphicon-arrow-right"></i></a></li>
    </ul>
</div>
</div>
<div class="row">
<div class="col-sm-12 text-right">
    <a class="btn btn-link top" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+administration/configuration/encryptable-properties.md&template=documentation-bug.md"><i class="glyphicon glyphicon-flag"></i> Report a problem</a>
    <a class="btn btn-link top btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/administration/configuration/encryptable-properties.md"><i class="glyphicon glyphicon-pencil"></i>  Edit this page</a>
</div>
</div>
</div>
<div id="docbody">
<div class="container">
<div class="row">
<div class="col-sm-3 toc-nav">
<div class="nav">
<ul>
<li><a href="#approach">Approach</a></li>
<li><a href="#encrypting-property-values">Encrypting Property values</a></li>
<li><a href="#decrypting-rundeck-config.properties">Decrypting rundeck-config.properties</a></li>
<li><a href="#advanced-usage">Advanced Usage</a></li>
</ul>
</div>
</div>
<div class="col-sm-9">
<div class="page-header">
<h1 class="title">Rundeck PRO Config Property Encryption</h1>
</div>
<p>All Rundeck PRO bundles come with a feature that allows you to encrypt the values in the rundeck-config.properties file.</p>
<h3 id="approach">Approach</h3>
<p>To use encrypted properties in Rundeck you will have a master password that will be used to encrypt and decrypt the other passwords you wish to use in the rundeck-config.properties file.</p>
<p>For instance you might want to encrypt the bind password to your LDAP server. Let’s say your LDAP bind password is <code>binder123</code>. You will need a master password to encrypt this value. We will use <code>1PwdToBindThem$</code> for the master password.</p>
<h3 id="encrypting-property-values">Encrypting Property values</h3>
<p>Rundeck Pro has a feature to allow you to generate encrypted passwords using the Jasypt encryption library. The following instructions show how to encrypt a password with this utility from the command line.</p>
<p>cd into the directory where your rundeck.war is located<br />
run: <code>java -jar rundeck.war --encryptpwd Jasypt</code><br />
You will receive prompts for information that look like the following:</p>
<pre><code>Required values are marked with: *
Encrypter Config (The base property name used in RD_ENCRYPTION_ or rd.encryption. (&#39;default&#39; is the default value)):

*Master Password (Master password used to encrypt the value):
1PwdToBindThem$
*Value To Encrypt (The text you want to encrypt):
binder123

==ENCRYPTED OUTPUT==
encrypted: bbnJmDtx82/NOeUc9ahULGVAH+RdSLG5</code></pre>
<p>You will take the <code>encrypted:</code> value from the ENCRYPTED OUTPUT section which will have a value that looks like: <code>bbnJmDtx82/NOeUc9ahULGVAH+RdSLG5</code> (note that it will not be this value) and use it in your rundeck-config.properties file like this:<br />
<code>rundeck.security.ldap.bindPassword=ENC(bbnJmDtx82/NOeUc9ahULGVAH+RdSLG5)</code></p>
<h3 id="decrypting-rundeck-config.properties">Decrypting rundeck-config.properties</h3>
<p>To decrypt the encrypted properties in your rundeck-config.properties file you will need to set the environment variable <code>RUNDECK_PROP_DECRYPTER_PWD</code> with the value of your master password before starting Rundeck.</p>
<p>In our example we would do: <code>export RUNDECK_PROP_DECRYPTER_PWD=1PwdToBindThem$</code> then we would start our Rundeck PRO installation. After the application has completed the bootstrap process and is responding to requests, the environment variable can be unset for security purposes.</p>
<h3 id="advanced-usage">Advanced Usage</h3>
<p>If you wish to customize the algorithm, provider, or keyObtentions the Jasypt encryptor will use to encrypt the password, you can do this by passing those values as system properties when you launch the encryption utility.</p>
<p>For example, if you wish to use the <code>PBEWITHSHA256AND256BITAES-CBC-BC</code> algorithm to encrypt your password, you could do it like this:</p>
<pre><code>&gt; java -jar -Drd.encryption.STRONG.algorithm=PBEWITHSHA256AND256BITAES-CBC-BC rundeckpro-cluster-3.0.0-SNAPSHOT.war --encryptpwd Jasypt
Required values are marked with: *
Encrypter Config (The base property name used in RD_ENCRYPTION_ or rd.encryption. (&#39;default&#39; is the default value)):
STRONG
*Master Password (Master password used to encrypt the value):
1PwdToBindThem$
*Value To Encrypt (The text you want to encrypt):
binder123

==ENCRYPTED OUTPUT==
encrypted: i67e4g3jAUML0KCh+KwmnqX9lCflThMuu6CXm++VSqU=</code></pre>
<p>Notice we are setting an rd.encryption config with the name STRONG. Then when prompted for the <code>Encrypter Config</code> by the tool we type in the value <code>STRONG</code>. This sets the encryptor to use the algorithm passed by <code>rd.encryption.STRONG.algorithm</code> instead of the default configuration which uses a different algorithm.</p>
<p>To use your custom encrypted password when you start Rundeck, it is very important to ensure that the same system properties you used at encrypt time are set at launch time. Otherwise Rundeck will use the default decryptor settings which will not match your customized settings, and startup will fail.</p>
<p>To start Rundeck with the settings in our example, the startup string would be something like:</p>
<pre><code>java -jar -Drd.encryption.STRONG.algorithm=PBEWITHSHA256AND256BITAES-CBC-BC -Drundeck.encrypter.config.name=STRONG rundeckpro-cluster-3.0.0-SNAPSHOT.war</code></pre>
<p>If you would rather use environment variables to set the encryption settings you can use:<br />
<code>RUNDECK_PROP_DECRYPTER_CONFIG</code> to set the config to use<br />
and config settings can be supplied like:<br />
<code>RD_ENCRYPTION_{your config name}_ALGORITHM</code></p>
<p>For the example above, these would be:<br />
<code>export RUNDECK_PROP_DECRYPTER_CONFIG=STRONG</code><br />
<code>export RD_ENCRYPTION_STRONG_ALGORITHM=PBEWITHSHA256AND256BITAES-CBC-BC</code></p>
</div>
</div>
</div>
</div>

<div class="container bottom breadcrumb_holder">
<div class="row">
<div class="col-sm-6" id="#breadcrumbsbottom">

<div class="navquerytoggle collapse" aria-expanded="false">
<div class="input-group ">
    <a class="input-group-addon btn btn-xs" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbsbottom"><i class="glyphicon glyphicon-search"></i></a>
    <input type="text" class="form-control navquery  " name="q" placeholder="Search" autofocus="true">    
    <a class="input-group-addon btn btn-xs" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbsbottom"><i class="glyphicon glyphicon-remove"></i></a>
</div>
</div>

<ol class="breadcrumb bottom collapse in navquerytoggle" aria-expanded="true">
    <li class="navquerytrigger collapse" title="Find a page by name. (Keyboard shortcut: q)" data-toggle="tooltip" data-container="body">
        <a class="btn btn-xs btn-link" data-toggle="collapse" data-target=".navquerytoggle"  data-parent="#breadcrumbsbottom">
            <i class="glyphicon glyphicon-search"></i>
        </a>
    </li>

    
        <li><a href="../../index.html">Rundeck Documentation (3.0.x)</a></li>
    
        <li><a href="../index.html">Administrator Guide</a></li>
    
    
    <li ><a href="index.html">Rundeck Configuration</a></li>
    <li class="active"><a href="encryptable-config-properties-pro.html">Encryptable Config Properties (Pro)</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="system-properties-configuration.html"><i class="glyphicon glyphicon-arrow-left"></i> System Properties Configuration</a></li>
      <li class="next"><a href="storage-facility.html">Storage Facility <i class="glyphicon glyphicon-arrow-right"></i></a></li>
    </ul>
</div>
</div>
<div class="row">
<div class="col-sm-12 text-right">
    <a class="btn btn-link bottom" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+administration/configuration/encryptable-properties.md&template=documentation-bug.md"><i class="glyphicon glyphicon-flag"></i> Report a problem</a>
    <a class="btn btn-link bottom btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/administration/configuration/encryptable-properties.md"><i class="glyphicon glyphicon-pencil"></i>  Edit this page</a>
</div>
</div>
</div>
<div class='container footer'>

<div class="row">
	<footer class="copy col-sm-12 text-muted">

<p>
<a class="btn btn-info btn-try-rundeck-pro" href="http://rundeck.com/" data-toggle="popover" data-trigger="hover" 
data-content="<ul class=&quot;list-unstyled&quot;>
	<li><i class=&quot;glyphicon glyphicon-gift&quot;></i> Try Rundeck Enterprise for Free</li>
	<li><i class=&quot;glyphicon glyphicon-flash&quot;></i> Get Exclusive Features</li>
	<li><i class=&quot;glyphicon glyphicon-briefcase&quot;></i> Get Professional Support</li>
	<li><i class=&quot;glyphicon glyphicon-heart&quot;></i> Support Open-source Development</li>
	<li><i class=&quot;glyphicon glyphicon-thumbs-up&quot;></i> Get home by 5 </li>
</ul>" data-html="true">
<i class="glyphicon glyphicon-hand-right"></i>
Try Rundeck Enterprise
</a>
</p>

<span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Rundeck Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://rundeck.com" property="cc:attributionName" rel="cc:attributionURL">Rundeck, Inc</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
<p>
&copy;2018 <a href="http://rundeck.com">Rundeck</a>
</p>
<p>
<span class="generated-date" title="2018-12-14T00:08:18UTC">2018-12-14T00:08:18UTC</span>
</p>
</footer>
</div>
</div>
<script type="text/javascript">
  

   var _gaq = [['_setAccount', 'UA-529275-13'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>
<!-- Start of HubSpot Embed Code -->
<script type=“text/javascript” id=“hs-script-loader” async defer src=“//js.hs-scripts.com/2768099.js”></script>
<!-- End of HubSpot Embed Code -->

<script>window.markdeepOptions={mode:'html'};</script>
<!-- Markdeep: --><script src="../../markdeep.min.js"></script>
<!-- <script src="https://casual-effects.com/markdeep/latest/markdeep.min.js"></script> -->
</body>
</html>
