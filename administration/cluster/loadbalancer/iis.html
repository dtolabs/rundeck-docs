<!DOCTYPE html>
<html>
<head>
  <title>Using Microsoft IIS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="pandoc" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">

<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(function(){
  jQuery('table').addClass('table table-condensed table-responsive'); 
  jQuery('[data-toggle="popover"]').popover();
});
</script>
  <link rel="stylesheet" href="../../../style.css" type="text/css" />
</head>
<body data-spy="scroll" data-target=".toc-nav">
<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
  <!-- Brand and toggle get grouped for better mobile display -->
  <div class="container-fluid">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="https://www.rundeck.com/open-source">
      Rundeck
      <p class="small rd_version">← Return to Rundeck Project</p>
    </a>
  </div>
  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <form class="navbar-form navbar-right" role="search"  action="/search/">
      <div class="form-group">
        <input type="text" class="form-control" name="q" placeholder="Search">
      </div>
      <button type="submit" class="btn btn-default">Submit</button>
    </form>
  </div>
  </div>
</nav>

<div class="container top breadcrumb_holder">
<div class="row">
<div class="col-sm-6">
<ol class="breadcrumb top">

    
        <li><a href="../../../index.html">Rundeck Documentation (3.0.x)</a></li>
    
        <li><a href="../../index.html">Administrator Guide</a></li>
    
        <li><a href="../index.html">Rundeck Pro Cluster</a></li>
    
    
    <li ><a href="index.html">Loadbalancer</a></li>
    <li class="active"><a href="iis.html">IIS</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="haproxy.html"><i class="glyphicon glyphicon-arrow-left"></i> HAProxy</a></li>
      
    </ul>
</div>
</div>
<div class="row">
<div class="col-sm-12 text-right">
    <a class="btn btn-link top" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+administration/cluster/loadbalancer/iis.md&template=documentation-bug.md"><i class="glyphicon glyphicon-flag"></i> Report a problem</a>
    <a class="btn btn-link top btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/administration/cluster/loadbalancer/iis.md"><i class="glyphicon glyphicon-pencil"></i>  Edit this page</a>
</div>
</div>
</div>
<div id="docbody">
<div class="container">
<div class="row">
<div class="col-sm-3 toc-nav">
<div class="nav">
<ul>
<li><a href="#iis-as-a-loadbalancer">IIS as a loadbalancer</a></li>
<li><a href="#iis-as-a-reverse-proxy">IIS as a reverse proxy</a><ul>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul></li>
</ul>
</div>
</div>
<div class="col-sm-9">
<div class="page-header">
<h1 class="title">Using Microsoft IIS</h1>
</div>
<!---
Original: http://support.rundeck.com/customer/en/portal/articles/2819414-install-rundeck-pro-team-launcher-on-windows
--->
<h2 id="iis-as-a-loadbalancer">IIS as a loadbalancer</h2>
<p>TODO</p>
<h2 id="iis-as-a-reverse-proxy">IIS as a reverse proxy</h2>
<p>These steps allow to “integrate” Rundeck with IIS. This could be necessary for example for these user cases:</p>
<ul>
<li>to get Rundeck through the port 80 in a subdirectory of IIS (e.g. http://yoursite/rundeck)</li>
<li>when It is already set up a SSL certificate for a site and you want to reuse it without fiddling with the java certstore</li>
</ul>
<p>If you are at least on 2008R2, you can install the ARR extension to proxy requests to the Jetty instance. To do so, we need first to modify the port rundeck is running and specify the “prefix” for all urls generated by rundeck. Also, to avoid that anyone bypass IIS, rundeck must listen only on 127.0.0.1.</p>
<p>Modify the <code>%RDECK_BASE%\start_rundeck.bat</code> port (81) and host (127.0.0.1) as follows:</p>
<pre><code>set CURDIR=%~dp0
call %CURDIR%etc\profile.bat
java %RDECK_CLI_OPTS% %RDECK_SSL_OPTS%  &quot;-Dserver.http.host=127.0.0.1&quot; &quot;-Dserver.http.port=81&quot; -jar rundeckpro-launcher-XXXX-X.X.X.jar --installonly</code></pre>
<p>But you can also put options in %RDECK_BASE%.bat (in this case the “prefix” and the little bit that makes rundeck work behind a reverse proxy) as long as you define all of them.</p>
<pre><code>set RDECK_CLI_OPTS=-Xmx4096m -Xms1024m &quot;-Drundeck.jetty.connector.forwarded=true&quot; &quot;-Dserver.web.context=/rundeck&quot;</code></pre>
<p>You will need to modify <code>%RDECK_BASE%\server\config\rundeck-config.properties</code>, as <code>grails.serverURL</code> is needed to be the absolute url:</p>
<pre><code>grails.serverURL=http://yoursite/rundeck</code></pre>
<p>Now, in IIS, (at the site level) create an URL Rewrite rule as follows:</p>
<ul>
<li>add inbound rule</li>
<li>name: route_to_rdeck (or whatever you prefer) matches the pattern (using regular expression): rundeck.* (or a regex matching your “prefix”)</li>
<li>action type: rewrite</li>
<li>rewrite url: http://127.0.0.1:81/{R:0}</li>
<li>check append query string</li>
</ul>
<p>Then, any request coming to <code>http://yoursite/rundeck</code> will be proxying to your rundeck instance running on port 81 on the same server, and you’ll be sure that every request will come in only proxyied by IIS, since rundeck is only listening to 127.0.0.1.</p>
<h3 id="troubleshooting">Troubleshooting</h3>
<p>If the rewrite module does not work, go to the Application Request Routing settings on the IIS home, and enable the proxy.</p>
</div>
</div>
</div>
</div>

<div class="container bottom breadcrumb_holder">
<div class="row">
<div class="col-sm-6">
<ol class="breadcrumb bottom">

    
        <li><a href="../../../index.html">Rundeck Documentation (3.0.x)</a></li>
    
        <li><a href="../../index.html">Administrator Guide</a></li>
    
        <li><a href="../index.html">Rundeck Pro Cluster</a></li>
    
    
    <li ><a href="index.html">Loadbalancer</a></li>
    <li class="active"><a href="iis.html">IIS</a></li>
</ol>
</div>
<div class="col-sm-6">
    <ul class="pager">
      <li class="previous"><a href="haproxy.html"><i class="glyphicon glyphicon-arrow-left"></i> HAProxy</a></li>
      
    </ul>
</div>
</div>
<div class="row">
<div class="col-sm-12 text-right">
    <a class="btn btn-link bottom" href="https://github.com/rundeck/docs/issues/new?labels=bug&title=Documentation+bug+in+file+administration/cluster/loadbalancer/iis.md&template=documentation-bug.md"><i class="glyphicon glyphicon-flag"></i> Report a problem</a>
    <a class="btn btn-link bottom btn-edit-this-page" href="https://github.com/rundeck/docs/edit/3.0.x/en/administration/cluster/loadbalancer/iis.md"><i class="glyphicon glyphicon-pencil"></i>  Edit this page</a>
</div>
</div>
</div>
<div class='container footer'>

<div class="row">
	<footer class="copy col-sm-12 text-muted">

<p>
<a class="btn btn-info btn-try-rundeck-pro" href="http://rundeck.com/" data-toggle="popover" data-trigger="hover" 
data-content="<ul class=&quot;list-unstyled&quot;>
	<li><i class=&quot;glyphicon glyphicon-gift&quot;></i> Try Rundeck Pro for Free</li>
	<li><i class=&quot;glyphicon glyphicon-flash&quot;></i> Get Exclusive Features</li>
	<li><i class=&quot;glyphicon glyphicon-briefcase&quot;></i> Get Professional Support</li>
	<li><i class=&quot;glyphicon glyphicon-heart&quot;></i> Support Open-source Development</li>
	<li><i class=&quot;glyphicon glyphicon-thumbs-up&quot;></i> Get home by 5 </li>
</ul>" data-html="true">
<i class="glyphicon glyphicon-hand-right"></i>
Try Rundeck Pro
</a>
</p>

<span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Rundeck Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://simplifyops.com" property="cc:attributionName" rel="cc:attributionURL">Rundeck, Inc</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
<p>
&copy;2018 <a href="http://rundeck.com">Rundeck</a>
</p>
<p>
<span class="generated-date" title="2018-10-01T18:19:19UTC">2018-10-01T18:19:19UTC</span>
</p>
</footer>
</div>
</div>
<script type="text/javascript">
  

   var _gaq = [['_setAccount', 'UA-529275-13'], ['_trackPageview']];
   (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
   })(document, 'script');
  </script>
<!-- Start of HubSpot Embed Code -->
<script type=“text/javascript” id=“hs-script-loader” async defer src=“//js.hs-scripts.com/2768099.js”></script>
<!-- End of HubSpot Embed Code -->

<script>window.markdeepOptions={mode:'html'};</script>
<!-- Markdeep: --><script src="../../../markdeep.min.js"></script>
<!-- <script src="https://casual-effects.com/markdeep/latest/markdeep.min.js"></script> -->
</body>
</html>
